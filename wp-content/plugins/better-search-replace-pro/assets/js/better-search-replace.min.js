!function(i){"use strict";function o(e,s,r,a){i.ajax({type:"POST",url:bsr_object_vars.endpoint+e,data:{bsr_ajax_nonce:bsr_object_vars.ajax_nonce,action:e,bsr_step:s,bsr_page:r,bsr_data:a},dataType:"json",success:function(s){void 0!==s.message&&(i(".bsr-description").remove(),i(".bsr-progress-wrap").append('<p class="description bsr-description">'+s.message+"</p>")),"done"==s.step?(t("100%"),void 0!==s.next_action?(t("0%",0),o(s.next_action,0,0,s.bsr_data)):(i(".bsr-processing-wrap").remove(),i(".bsr-disabled").removeClass("bsr-disabled button-disabled"),window.location=s.url)):(t(s.percentage),o(e,s.step,s.page,s.bsr_data))}}).fail(function(s){i(".bsr-processing-wrap").remove(),i(".bsr-disabled").removeClass("bsr-disabled button-disabled"),i("#bsr-error-wrap").html('<div class="error"><p>'+bsr_object_vars.unknown+"</p></div>").show(),window.console&&window.console.log&&console.log(s)})}function t(s,e){void 0===e&&(e=150),i(".bsr-progress").animate({width:s},e)}var e,a,r,n;(e=i("#bsr-backup-submit")).on("click",function(s){s.preventDefault(),e.hasClass("button-disabled")||(s=i(".bsr-action-form").serialize(),e.addClass("bsr-disabled button-disabled"),i("#bsr-backup-form").after('<div class="bsr-processing-wrap"><div class="spinner is-active bsr-spinner"></div><div class="bsr-progress-wrap"><div class="bsr-progress"></div></div></div>'),i(".bsr-progress-wrap").append('<p class="description bsr-description">'+bsr_object_vars.processing+"</p>"),o("process_backup",0,0,s))}),(a=i("#bsr-import-submit")).on("click",function(s){s.preventDefault();var s=i("#bsr-file-import").prop("files")[0],e=i("#bsr_import_profile").val(),r=new FormData;r.append("bsr_import_file",s),r.append("action","upload_import"),r.append("profile",e),r.append("bsr_ajax_nonce",bsr_object_vars.ajax_nonce),i.ajax({url:bsr_object_vars.endpoint+"upload_import",dataType:"json",cache:!1,contentType:!1,processData:!1,data:r,type:"post",success:function(s){"manual"===s.upload_method?confirm("No upload was detected, but an existing backup file was detected at "+s.file+". Do you want to import it?")&&(a.hasClass("button-disabled")||(a.addClass("bsr-disabled button-disabled"),i("#bsr-import-form").append('<div class="bsr-processing-wrap"><div class="spinner is-active bsr-spinner"></div><div class="bsr-progress-wrap"><div class="bsr-progress"></div></div></div>'),i(".bsr-progress-wrap").append('<p class="description bsr-description">Importing database...</p>'),o("process_import",0,0,s))):"ajax"==s.upload_method?a.hasClass("button-disabled")||(a.addClass("bsr-disabled button-disabled"),i("#bsr-import-form").after('<div class="bsr-processing-wrap"><div class="spinner is-active bsr-spinner"></div><div class="bsr-progress-wrap"><div class="bsr-progress"></div></div></div>'),i(".bsr-progress-wrap").append('<p class="description bsr-description">Importing database...</p>'),o("process_import",0,0,s)):alert("Please upload a valid backup file, or try increasing the max upload size.")}}).fail(function(s){window.console&&window.console.log&&console.log(s)})}),r=i("#bsr-submit"),n=i("#bsr-error-wrap"),r.on("click",function(s){s.preventDefault(),r.hasClass("button-disabled")||(i("#search_for").val()?i("#bsr-table-select").val()?(s=i(".bsr-action-form").serialize().replace(/%5C/g,"#BSR_BACKSLASH#"),n.html("").hide(),r.addClass("bsr-disabled button-disabled"),i("#bsr-submit-wrap").before('<div class="bsr-processing-wrap"><div class="spinner is-active bsr-spinner"></div><div class="bsr-progress-wrap"><div class="bsr-progress"></div></div></div>'),i(".bsr-progress-wrap").append('<p class="description bsr-description">'+bsr_object_vars.processing+"</p>"),o("process_search_replace",0,0,s)):n.html('<div class="error"><p>'+bsr_object_vars.no_tables+"</p></div>").show():n.html('<div class="error"><p>'+bsr_object_vars.no_search+"</p></div>").show())}),i("#bsr-page-size-slider").slider({value:bsr_object_vars.page_size,range:"min",min:1e3,max:5e4,step:1e3,slide:function(s,e){i("#bsr-page-size-value").text(e.value),i("#bsr_page_size").val(e.value)}}),i("#bsr-max-results-slider").slider({value:bsr_object_vars.max_results,range:"min",min:20,max:1e3,step:20,slide:function(s,e){i("#bsr-max-results-value").text(e.value),i("#bsr_max_results").val(e.value)}}),i("#save_profile").on("change",function(){this.checked?i(this).closest("label").next("div").fadeIn("fast"):i(this).closest("label").next("div").fadeOut("fast")}),i("body").on("mouseover",".tooltip",function(s){var e=i(this),r=i(this).next(),a=(i(".helper-message").not(r).hide(),e.width(),e.position());r.hasClass("left")?r.css({left:a.left-r.width()-e.width()-29+"px",top:a.top+e.height()/2-18+"px"}):r.hasClass("bottom")?r.css({left:a.left-r.width()/2-5+"px",top:a.top+e.height()+19+"px"}):r.css({left:a.left+e.width()+19+"px",top:a.top+e.height()/2-18+"px"}),r.toggle()}),i("body").on("mouseleave",".tooltip",function(s){i(".helper-message").hide()}),i(".notice.inline").appendTo(".bsr-notice-container").css("display","block"),setTimeout(function(){const s=i("#setting-error-settings_updated"),e=i(".bsr-updated");(s.length||e.length)&&(i('<div class="bsr-inner-notice-container"></div>').prependTo(".inside"),s.prependTo(".bsr-inner-notice-container").css("display","block"),e.prependTo(".bsr-inner-notice-container").css("display","block")),i(".bsr-inner-notice-container .notice-dismiss").on("click",function(s){e.length||i(".bsr-inner-notice-container").remove()})},75)}(jQuery);
//# sourceMappingURL=better-search-replace.min.js.map