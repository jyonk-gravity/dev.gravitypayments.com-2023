(function(e,t,a){e((function(){var i=e(this);var n=false;i.on("click",'.notice[data-plugin="short-pixel-ai"] .buttons-wrap [data-action], .notice[data-plugin="short-pixel-ai"] button.notice-dismiss, .dismissed-notice[data-plugin="short-pixel-ai"] .buttons-wrap [data-action], .dismissed-notice[data-plugin="short-pixel-ai"] .buttons-wrap button.notice-dismiss',(function(){var r=e(this),o=r.parents('.notice[data-plugin="short-pixel-ai"], .dismissed-notice[data-plugin="short-pixel-ai"]');r.prop("disabled",true);var s=o.attr("data-causer"),d=r.attr("data-type"),u=r.attr("data-action"),c=r.attr("data-additional");s=typeof s==="string"&&s!==""?s:undefined;u=typeof u==="string"&&u!==""?u:s!==undefined&&r.hasClass("notice-dismiss")?"dismiss":undefined;try{c=JSON.parse(c)}catch(e){c=undefined}if(s!==undefined){if(d==="js"){if(typeof jQuery[u]==="function"){jQuery[u](c)}}else if(!n){e.ajax({method:"post",url:typeof ajaxurl==="string"&&ajaxurl!==""?ajaxurl:"/wp-admin/admin-ajax.php",data:{action:"shortpixel_ai_handle_notice_action",causer:o.attr("data-causer"),data:{action:u,additional:c}},beforeSend:function(){n=true},success:function(n){o.slideUp("fast",(function(){if(typeof n.notice==="string"&&n.notice!==""){var t=e(n.notice).hide();o.after(t);i.trigger("wp-updates-notice-added");t.slideDown("fast",(function(){t.removeAttr("style")}))}o.remove()}));if(typeof n.redirect!=="undefined"&&!!n.redirect.allowed){if(typeof n.redirect.url==="string"&&n.redirect.url!==""){if(!!n.redirect.blank){a.open(n.redirect.url)}else{t.location.href=n.redirect.url}}}if(typeof n.reload!=="undefined"&&!!n.reload.allowed){t.location.reload()}},complete:function(){n=false}})}}}));i.on("click",'.notice[data-causer="recommend_survey"] .survey-rating-btn',(function(t){t.preventDefault();var a=e(this),i=a.data("rating"),n=a.closest('.notice[data-causer="recommend_survey"]');n.find(".survey-rating-btn").removeClass("selected");a.addClass("selected");e.post(ajaxurl,{action:"shortpixel_ai_send_rating",data:{rating:i}});if(i>=9){n.find("h3, .message-wrap > p").slideUp();var r="<p>Thank you for your high rating! "+"If you have a moment, the ShortPixel team would be very happy "+"if you could leave a short review for our plugin.</p>";var o="<p>"+'<button id="survey-feedback-submit" class="button button-primary" '+"onclick=\"window.open('https://wordpress.org/support/plugin/shortpixel-adaptive-images/reviews/?filter=5', '_blank')\">"+"Leave a review"+"</button>"+"</p>";n.find("#survey-feedback-area").html(r+o).slideDown();return}n.find("h3").slideUp();n.find(".survey-rating-btn").closest("p").slideUp();var s=i<=4?"Thank you for your feedback! If you have encountered any issues with our plugin, we are more than eager to help solving them! Please give us more details:":"Thank you for your feedback! Please let us know what we can improve:";n.find("#survey-feedback-prompt").text(s);n.find("#survey-feedback-area").slideDown()}));i.on("click",'.notice[data-causer="recommend_survey"] #survey-feedback-submit',(function(t){t.preventDefault();var a=e(this).closest('.notice[data-causer="recommend_survey"]'),i=a.find(".survey-rating-btn.selected").data("rating"),n=a.find("#survey-feedback").val()||"";e.post(ajaxurl,{action:"shortpixel_ai_send_feedback",data:{rating:i,feedback:n}}).done((function(e){var t=a.find(".message-wrap");if(e.success){t.html("<p>Thank you for your feedback!</p>");a.find("#survey-feedback-area, .buttons-wrap").slideUp()}else{var i=e.data||"Something went wrong sending feedback!";t.html("<p>"+i+"</p>")}}))}))}))})(jQuery,document,window);