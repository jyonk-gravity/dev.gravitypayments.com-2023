(function(){"use strict";var h={};(function(){h.d=function(t,e){for(var s in e)h.o(e,s)&&!h.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}})(),function(){h.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}();var v={};h.d(v,{default:function(){return P}});var c=Object(window.WPD).AjaxSearchPro,i=Object(window.WPD).DoMini;let r=c.helpers;c.plugin.liveLoad=function(t,e,s,d,p){let n=t;if(n==="body"||n==="html")return console.log("Ajax Search Pro: Do not use html or body as the live loader selector."),!1;let a=this;ASP.pageHTML!==""&&a.setLiveLoadCache(ASP.pageHTML,t);function _(f){let o=r.Hooks.applyFilters("asp/live_load/raw_data",f,a),L=new DOMParser,x=L.parseFromString(o,"text/html"),u=i(x);if(a.o.statistics&&a.stat_addKeyword(a.o.id,a.n("text").val()),o!==""&&u.length>0&&u.find(n).length>0){o=o.replace(/&asp_force_reset_pagination=1/gmi,""),o=o.replace(/%26asp_force_reset_pagination%3D1/gmi,""),o=o.replace(/&#038;asp_force_reset_pagination=1/gmi,""),r.isSafari()&&(o=o.replace(/srcset/gmi,"nosrcset")),o=r.Hooks.applyFilters("asp_live_load_html",o,a.o.id,a.o.iid),u=i(L.parseFromString(o,"text/html"));let g=u.find(n).get(0);g=r.Hooks.applyFilters("asp/live_load/replacement_node",g,a,l.get(0),o),g!=null&&l.get(0).parentNode.replaceChild(g,l.get(0)),l=i(n).first(),s&&(document.title=x.title,history.pushState({},null,e)),i(n).first().find(".woocommerce-ordering select.orderby").on("change",function(){i(this).closest("form").length>0&&i(this).closest("form").get(0).submit()}),a.addHighlightString(i(n).find("a")),r.Hooks.applyFilters("asp/live_load/finished",e,a,n,l.get(0)),ASP.initialize(),a.lastSuccesfulSearch=i("form",a.n("searchsettings")).serialize()+a.n("text").val().trim(),a.lastSearchData=o,a.setLiveLoadCache(f,t)}a.n("s").trigger("asp_search_end",[a.o.id,a.o.iid,a.n("text").val(),o],!0,!0),a.gaEvent?.("search_end",{results_count:"unknown"}),a.hideLoader(),l.css("opacity",1),a.searching=!1,a.n("text").val()!==""&&a.n("proclose").css({display:"block"})}s=typeof s>"u"?!0:s,d=typeof d>"u"?!1:d;let m=[".search-content","#content","#Content","div[role=main]","main[role=main]","div.theme-content","div.td-ss-main-content","main.l-content","#primary"];if(n!=="#main"&&m.unshift("#main"),i(n).length<1&&(m.forEach(function(f){if(i(f).length>0)return n=f,!1}),i(n).length<1))return console.log("Ajax Search Pro: The live search selector does not exist on the page."),!1;n=r.Hooks.applyFilters("asp/live_load/selector",n,this);let l=i(n).first();a.searchAbort(),l.css("opacity",.4),e=r.Hooks.applyFilters("asp/live_load/url",e,a,n,l.get(0)),r.Hooks.applyFilters("asp/live_load/start",e,a,n,l.get(0)),!d&&a.n("searchsettings").find("input[name=filters_initial]").val()==="1"&&a.n("text").val()===""?window.WPD.intervalUntilExecute(function(){_(ASP.pageHTML)},function(){return ASP.pageHTML!==""}):typeof p<"u"?_(p.html):(a.searching=!0,a.post=i.fn.ajax({url:e,method:"GET",success:function(f){_(f),a.isAutoP=!1},dataType:"html",fail:function(f){l.css("opacity",1),!f.aborted&&(l.html("This request has failed. Please check your connection."),a.hideLoader(),a.searching=!1,a.n("proclose").css({display:"block"}),a.isAutoP=!1)}}))},c.plugin.usingLiveLoader=function(){let t=this;return t._usingLiveLoader=typeof t._usingLiveLoader>"u"?i(".asp_es_"+t.o.id).length>0||t.o.resPage.useAjax&&i(t.o.resPage.selector).length>0||t.o.wooShop.useAjax&&i(t.o.wooShop.selector).length>0||t.o.cptArchive.useAjax&&i(t.o.cptArchive.selector).length>0||t.o.taxArchive.useAjax&&i(t.o.taxArchive.selector).length>0:t._usingLiveLoader,t._usingLiveLoader},c.plugin.getLiveURLbyBaseLocation=function(t){let e=this,s="asp_ls="+r.nicePhrase(e.n("text").val()),d="&";t.indexOf("?")===-1&&(d="?");let p=t+d+s+"&asp_active=1&asp_force_reset_pagination=1&p_asid="+e.o.id+"&p_asp_data=1&"+i("form",e.n("searchsettings")).serialize();return p=p.replace("?&","?"),p=p.replace("&&","&"),p},c.plugin.getCurrentLiveURL=function(){let t=this,e=window.location.href;return e=e.indexOf("asp_ls=")>-1?e.slice(0,e.indexOf("asp_ls=")):e,e=e.indexOf("asp_ls&")>-1?e.slice(0,e.indexOf("asp_ls&")):e,e=e.indexOf("p_asid=")>-1?e.slice(0,e.indexOf("p_asid=")):e,e=e.indexOf("asp_")>-1?e.slice(0,e.indexOf("asp_")):e,t.getLiveURLbyBaseLocation(e)},c.plugin.initLiveLoaderPopState=function(){let t=this;t.liveLoadCache=[],window.addEventListener("popstate",()=>{let e=t.getLiveLoadCache();e!==!1&&(t.n("text").val(e.phrase),r.formData(i("form",t.n("searchsettings")),e.settings),t.resetNoUISliderFilters(),t.liveLoad(e.selector,document.location.href,!1,!1,e))}),ASP.pageHTML===""&&typeof ASP._ajax_page_html>"u"&&(ASP._ajax_page_html=!0,i.fn.ajax({url:t.currentPageURL,method:"GET",success:function(e){ASP.pageHTML=e},dataType:"html"}))},c.plugin.setLiveLoadCache=function(t,e){let s=this;s.liveLoadCache.filter(d=>d.href===document.location.href).length===0&&s.liveLoadCache.push({href:t===ASP.pageHTML?s.currentPageURL:document.location.href,phrase:t===ASP.pageHTML?"":s.n("text").val(),selector:e,html:t,settings:t===ASP.pageHTML?s.originalFormData:r.formData(i("form",s.n("searchsettings")))})},c.plugin.getLiveLoadCache=function(){let e=this.liveLoadCache.filter(s=>s.href===document.location.href);return e.length>0?e[0]:!1};var S=null,P=c;Object(window.WPD).AjaxSearchPro=v.default})();
