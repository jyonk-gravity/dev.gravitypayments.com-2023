(function(){"use strict";var a={};(function(){a.d=function(d,t){for(var e in t)a.o(t,e)&&!a.o(d,e)&&Object.defineProperty(d,e,{enumerable:!0,get:t[e]})}})(),function(){a.o=function(d,t){return Object.prototype.hasOwnProperty.call(d,t)}}();var s={};a.d(s,{default:function(){return l}});var o=Object(window.WPD).AjaxSearchPro;const u=o.helpers;class _{init(){u.Hooks.addFilter("asp/search/end",this.finished.bind(this),10,this)}finished(t){typeof wc_add_to_cart_params>"u"||typeof jQuery>"u"||(this.requests=[],this.addRequest=this.addRequest.bind(this),this.run=this.run.bind(this),this.$liveRegion=this.createLiveRegion(),jQuery(t.n("resdrg").get(0)).find(".add-to-cart-button:not(.wc-interactive)").off().on("click",{addToCartHandler:this},this.onAddToCart))}addRequest(t){this.requests.push(t),this.requests.length===1&&this.run()}run(){const t=this,e=t.requests[0].complete;t.requests[0].complete=function(){typeof e=="function"&&e(),t.requests.shift(),t.requests.length>0&&t.run()},jQuery.ajax(this.requests[0])}onAddToCart(t){const e=jQuery(this);if(e.is(".ajax-add-to-cart")){if(!e.attr("data-product_id"))return!0;if(t.data.addToCartHandler.$liveRegion.text("").removeAttr("aria-relevant"),t.preventDefault(),e.removeClass("added"),e.addClass("loading"),jQuery(document.body).triggerHandler("should_send_ajax_request.adding_to_cart",[e])===!1)return jQuery(document.body).trigger("ajax_request_not_sent.adding_to_cart",[!1,!1,e]),!0;const n={};jQuery.each(e.data(),function(r,i){n[r]=i}),jQuery.each(e[0].dataset,function(r,i){n[r]=i});const c=e.closest(".add-to-cart-container").find(".add-to-cart-quantity");c.length>0&&(n.quantity=c.get(0).value),jQuery(document.body).trigger("adding_to_cart",[e,n]),t.data.addToCartHandler.addRequest({type:"POST",url:wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:n,success:function(r){if(r){if(r.error&&r.product_url){window.location=r.product_url;return}if(wc_add_to_cart_params.cart_redirect_after_add==="yes"){window.location=wc_add_to_cart_params.cart_url;return}jQuery(document.body).trigger("added_to_cart",[r.fragments,r.cart_hash,e])}},dataType:"json"})}}createLiveRegion(){const t=jQuery(".widget_shopping_cart_live_region");return t.length?t:jQuery('<div class="widget_shopping_cart_live_region screen-reader-text" role="status"></div>').appendTo("body")}}o.addons.add(new _);var f=null,l=o;Object(window.WPD).AjaxSearchPro=s.default})();
