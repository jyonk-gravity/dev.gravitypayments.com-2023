(function(){"use strict";var o={};(function(){o.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(e,{a:e}),e}})(),function(){o.d=function(a,e){for(var t in e)o.o(e,t)&&!o.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:e[t]})}}(),function(){o.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)}}();var p={};o.d(p,{default:function(){return v}});var u=Object(window.WPD).AjaxSearchPro,m=o.n(u),g=Object(window.WPD).DoMini,i=o.n(g);const _=m().helpers;class w{name="Elementor Widget Fixes";init(){const{Hooks:e}=_;e.addFilter("asp/init/etc",this.fixElementorPostPagination.bind(this),10,this),e.addFilter("asp/live_load/start",this.start.bind(this),10,this),e.addFilter("asp/live_load/finished",this.finished.bind(this),10,this),e.addFilter("asp/live_load/finished",this.fixImages.bind(this),11,this)}fixImages(e,t){i()(".asp_es_"+t.o.id).find("img[nosrcset]").forEach(n=>{i()(n).attr("srcset",i()(n).attr("nosrcset")).removeAttr("nosrcset")})}start(e,t,s,n){const r=t.n("searchsettings").find("form").serialize(),l=t.n("text").val().trim();!(r+l!==t.lastSuccesfulSearch)&&i()(n).find(".e-load-more-spinner").length>0&&i()(n).css("opacity","1"),i()(s).removeClass("e-load-more-pagination-end")}finished(e,t,s,n){const r=i()(n);if(s.includes("asp_es_")&&typeof elementorFrontend<"u"&&typeof elementorFrontend.init<"u"&&r.find(".asp_elementor_nores").length===0){const l=r.data("widget_type")||"";l!==""&&typeof jQuery<"u"&&elementorFrontend.hooks.doAction("frontend/element_ready/"+l,jQuery(r.get(0))),this.fixElementorPostPagination(t,e),t.o.scrollToResults.enabled&&this.scrollToResultsIfNeeded(r),t.n("s").trigger("asp_elementor_results",[t.o.id,t.o.iid,r.get(0)],!0,!0)}}scrollToResultsIfNeeded(e){const t=e.find(".elementor-post, .product").first();t.length&&!t.isInViewport(40)&&t.get(0).scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}fixElementorPostPagination(e,t){const s=i()(".asp_es_"+e.o.id);if(t=t||location.href,!s.length)return e;const n=new URL(t);if(!n.searchParams.size)return e;this.elementorHideSpinner(s.get(0)),n.searchParams.delete("asp_force_reset_pagination");const r=s.find(".e-load-more-anchor"),l=s.find(".elementor-pagination a, .elementor-widget-container .woocommerce-pagination a");if(r.length>0&&!l.length){const d=s.find(".elementor-widget-container").get(0),f=()=>{const c=r.data("page"),h=c?parseInt(c,10)+1:2;n.searchParams.set("page",h.toString()),r.data("next-page",n.href),r.next(".elementor-button-wrapper").find("a").attr("href",n.href)};d&&new MutationObserver(()=>{f(),console.log("Mutation observed: fixing anchor.")}).observe(d,{childList:!0,subtree:!0}),f()}else l.each(function(){const d=i()(this),f=d.attr("href")||"",c=new URL(f,window.location.origin);c.searchParams.has("asp_ls")?c.searchParams.delete("asp_force_reset_pagination"):n.searchParams.forEach((h,P)=>c.searchParams.set(P,h)),d.attr("href",c.href)});return e}elementorHideSpinner(e){i()(e).removeClass("e-load-more-pagination-loading").find(".eicon-animation-spin").removeClass("eicon-animation-spin")}}m().addons.add(new w);var x=null,v=u;Object(window.WPD).AjaxSearchPro=p.default})();
