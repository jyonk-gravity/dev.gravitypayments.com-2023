(function(){"use strict";var i={};(function(){i.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(e,{a:e}),e}})(),function(){i.d=function(a,e){for(var t in e)i.o(e,t)&&!i.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:e[t]})}}(),function(){i.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)}}();var p={};i.d(p,{default:function(){return v}});var u=Object(window.WPD).AjaxSearchPro,m=i.n(u),_=Object(window.WPD).DoMini,l=i.n(_);const g=m().helpers;class w{name="Elementor Widget Fixes";init(){const{Hooks:e}=g;e.addFilter("asp/init/etc",this.fixElementorPostPagination.bind(this),10,this),e.addFilter("asp/live_load/selector",this.fixSelector.bind(this),10,this),e.addFilter("asp/live_load/start",this.start.bind(this),10,this),e.addFilter("asp/live_load/finished",this.finished.bind(this),10,this)}fixSelector(e){return e.includes("asp_es_")&&(e+=" .elementor-widget-container"),e}start(e,t,o,r){const n=t.n("searchsettings").find("form").serialize(),c=t.n("text").val().trim();!(n+c!==t.lastSuccesfulSearch)&&l()(r).find(".e-load-more-spinner").length>0&&l()(r).css("opacity","1"),l()(o).parent().removeClass("e-load-more-pagination-end")}finished(e,t,o,r){const n=l()(r);if(o.includes("asp_es_")&&typeof elementorFrontend<"u"&&typeof elementorFrontend.init<"u"&&n.find(".asp_elementor_nores").length===0){const c=n.parent().data("widget_type")||"";c!==""&&typeof jQuery<"u"&&elementorFrontend.hooks.doAction("frontend/element_ready/"+c,jQuery(n.parent().get(0))),this.fixElementorPostPagination(t,e),t.o.scrollToResults.enabled&&this.scrollToResultsIfNeeded(n),t.n("s").trigger("asp_elementor_results",[t.o.id,t.o.iid,n.parent().get(0)],!0,!0)}}scrollToResultsIfNeeded(e){const t=e.find(".elementor-post, .product").first();t.length&&!t.isInViewport(40)&&t.get(0).scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}fixElementorPostPagination(e,t){const o=l()(".asp_es_"+e.o.id);if(t=t||location.href,!o.length)return e;const r=new URL(t);if(!r.searchParams.size)return e;this.elementorHideSpinner(o.get(0)),r.searchParams.delete("asp_force_reset_pagination");const n=o.find(".e-load-more-anchor"),c=o.find(".elementor-pagination a, .elementor-widget-container .woocommerce-pagination a");if(n.length>0&&!c.length){const d=o.find(".elementor-widget-container").get(0),f=()=>{const s=n.data("page"),h=s?parseInt(s,10)+1:2;r.searchParams.set("page",h.toString()),n.data("next-page",r.href),n.next(".elementor-button-wrapper").find("a").attr("href",r.href)};d&&new MutationObserver(()=>{f(),console.log("Mutation observed: fixing anchor.")}).observe(d,{childList:!0,subtree:!0}),f()}else c.each(function(){const d=l()(this),f=d.attr("href")||"",s=new URL(f,window.location.origin);s.searchParams.has("asp_ls")?s.searchParams.delete("asp_force_reset_pagination"):r.searchParams.forEach((h,P)=>s.searchParams.set(P,h)),d.attr("href",s.href)});return e}elementorHideSpinner(e){l()(e).removeClass("e-load-more-pagination-loading").find(".eicon-animation-spin").removeClass("eicon-animation-spin")}}m().addons.add(new w);var x=null,v=u;Object(window.WPD).AjaxSearchPro=p.default})();
