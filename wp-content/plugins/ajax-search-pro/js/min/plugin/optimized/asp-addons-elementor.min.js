(function(){"use strict";var c={};(function(){c.n=function(s){var e=s&&s.__esModule?function(){return s.default}:function(){return s};return c.d(e,{a:e}),e}})(),function(){c.d=function(s,e){for(var t in e)c.o(e,t)&&!c.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:e[t]})}}(),function(){c.o=function(s,e){return Object.prototype.hasOwnProperty.call(s,e)}}();var p={};c.d(p,{default:function(){return P}});var g=Object(window.WPD).AjaxSearchPro,h=c.n(g),m=Object(window.WPD).DoMini,a=c.n(m);const _=h().helpers;class v{name="Elementor Widget Fixes";init(){const{Hooks:e}=_;e.addFilter("asp/live_load/finished",this.finished.bind(this),10,this)}finished(e,t,r,n){const d=a()(n).find(".jet-listing div[data-nav]");if(!r.includes("asp_es_")||d.length===0)return;const o=d.get(0);if(o?.dataset?.nav===void 0||o?.dataset?.nav===null)return;const l=JSON.parse(o.dataset.nav);l.query===void 0&&(l.query={}),l.query.s=t.n("text").val().trim(),l.query.asp_id=t.o.id,o.dataset.nav=JSON.stringify(l)}}h().addons.add(new v);var S=null;const w=h().helpers;class x{name="Elementor Widget Fixes";init(){const{Hooks:e}=w;e.addFilter("asp/init/etc",this.fixElementorPostPagination.bind(this),10,this),e.addFilter("asp/live_load/start",this.start.bind(this),10,this),e.addFilter("asp/live_load/finished",this.finished.bind(this),10,this),e.addFilter("asp/live_load/finished",this.fixImages.bind(this),11,this)}fixImages(e,t){a()(".asp_es_"+t.o.id).find("img[nosrcset]").forEach(n=>{a()(n).attr("srcset",a()(n).attr("nosrcset")).removeAttr("nosrcset")})}start(e,t,r,n){const i=t.n("searchsettings").find("form").serialize(),d=t.n("text").val().trim();!(i+d!==t.lastSuccesfulSearch)&&a()(n).find(".e-load-more-spinner").length>0&&a()(n).css("opacity","1"),a()(r).removeClass("e-load-more-pagination-end")}finished(e,t,r,n){const i=a()(n);if(r.includes("asp_es_")&&typeof elementorFrontend<"u"&&typeof elementorFrontend.init<"u"&&i.find(".asp_elementor_nores").length===0){const d=i.data("widget_type")||"";d!==""&&typeof jQuery<"u"&&elementorFrontend.hooks.doAction("frontend/element_ready/"+d,jQuery(i.get(0))),this.fixElementorPostPagination(t,e),t.o.scrollToResults.enabled&&this.scrollToResultsIfNeeded(i),t.n("s").trigger("asp_elementor_results",[t.o.id,t.o.iid,i.get(0)],!0,!0)}}scrollToResultsIfNeeded(e){const t=e.find(".elementor-post, .product").first();t.length&&!t.isInViewport(40)&&t.get(0).scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}fixElementorPostPagination(e,t){const r=a()(".asp_es_"+e.o.id);if(t=t||location.href,!r.length)return e;const n=new URL(t);if(!n.searchParams.size)return e;this.elementorHideSpinner(r.get(0)),n.searchParams.delete("asp_force_reset_pagination");const i=r.find(".e-load-more-anchor"),d=r.find(".elementor-pagination a, .elementor-widget-container .woocommerce-pagination a");if(i.length>0&&!d.length){const o=r.find(".elementor-widget-container").get(0),l=()=>{const f=i.data("page"),u=f?parseInt(f,10)+1:2;n.searchParams.set("page",u.toString()),i.data("next-page",n.href),i.next(".elementor-button-wrapper").find("a").attr("href",n.href)};o&&new MutationObserver(()=>{l(),console.log("Mutation observed: fixing anchor.")}).observe(o,{childList:!0,subtree:!0}),l()}else d.each(function(){const o=a()(this),l=o.attr("href")||"",f=new URL(l,window.location.origin);f.searchParams.has("asp_ls")?f.searchParams.delete("asp_force_reset_pagination"):n.searchParams.forEach((u,b)=>f.searchParams.set(b,u)),o.attr("href",f.href)});return e}elementorHideSpinner(e){a()(e).removeClass("e-load-more-pagination-loading").find(".eicon-animation-spin").removeClass("eicon-animation-spin")}}h().addons.add(new x);var y=null,P=g;Object(window.WPD).AjaxSearchPro=p.default})();
