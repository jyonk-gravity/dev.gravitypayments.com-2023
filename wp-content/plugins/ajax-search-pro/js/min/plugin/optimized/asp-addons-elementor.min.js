(function(){"use strict";var h={};(function(){h.d=function(_,t){for(var n in t)h.o(t,n)&&!h.o(_,n)&&Object.defineProperty(_,n,{enumerable:!0,get:t[n]})}})(),function(){h.o=function(_,t){return Object.prototype.hasOwnProperty.call(_,t)}}();var u={};h.d(u,{default:function(){return w}});var m=Object(window.WPD).AjaxSearchPro,e=Object(window.WPD).DoMini;const p=m.helpers;class v{name="Elementor Widget Fixes";init(){p.Hooks.addFilter("asp/init/etc",this.fixElementorPostPagination,10,this),p.Hooks.addFilter("asp/live_load/selector",this.fixSelector,10,this),p.Hooks.addFilter("asp/live_load/url",this.url,10,this),p.Hooks.addFilter("asp/live_load/start",this.start,10,this),p.Hooks.addFilter("asp/live_load/replacement_node",this.fixElementorLoadMoreResults,10,this),p.Hooks.addFilter("asp/live_load/finished",this.finished,10,this)}fixSelector(t){return t.indexOf("asp_es_")>-1&&(t+=" .elementor-widget-container"),t}url(t,n,a,l){return t.indexOf("asp_force_reset_pagination=1")>=0&&(t=t.replace(/\?product\-page\=[0-9]+\&/,"?")),t}start(t,n,a,l){!(e("form",n.n("searchsettings")).serialize()+n.n("text").val().trim()!=n.lastSuccesfulSearch)&&e(l).find(".e-load-more-spinner").length>0&&e(l).css("opacity",1)}finished(t,n,a,l){let i=e(l);if(a.indexOf("asp_es_")!==!1&&typeof elementorFrontend<"u"&&typeof elementorFrontend.init<"u"&&i.find(".asp_elementor_nores").length==0){let r=i.parent().data("widget_type");r!=""&&typeof jQuery<"u"&&elementorFrontend.hooks.doAction("frontend/element_ready/"+r,jQuery(i.parent().get(0))),this.fixElementorPostPagination(n,t),n.o.scrollToResults.enabled&&this.scrollToResultsIfNeeded(i),n.n("s").trigger("asp_elementor_results",[n.o.id,n.o.iid,i.parent().get(0)],!0,!0)}}scrollToResultsIfNeeded(t){let n=t.find(".elementor-post, .product").first();n.length&&!n.inViewPort(40)&&n.get(0).scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}fixElementorPostPagination(t,n){let a=t,l=this,i=e(".asp_es_"+a.o.id);if(n=typeof n>"u"?location.href:n,i.length>0){l.elementorHideSpinner(i.get(0));let r=n.indexOf("?");if(r>=0){let s=n.substring(r+1);if(s)if(s=s.replace(/&asp_force_reset_pagination=1/gmi,""),i.find(".e-load-more-anchor").length>0&&i.find(".elementor-pagination a").length==0){let o=function(c){if(c.preventDefault(),c.stopPropagation(),!t.searching){let f=i.data("page")==""?2:parseInt(i.data("page"))+1,d=s.split("&page=");i.data("page",f),a.showLoader(),l.elementorShowSpinner(i.get(0)),a.liveLoad(".asp_es_"+a.o.id,n.split("?")[0]+"?"+d[0]+"&page="+f,!1,!0)}};i.find(".e-load-more-anchor").next(".elementor-button-wrapper").find("a").attr("href",""),i.find(".e-load-more-anchor").next(".elementor-button-wrapper").offForced().on("click",o),i.find(".asp_e_load_more_anchor").on("asp_e_load_more",o)}else i.find(".elementor-pagination a, .elementor-widget-container .woocommerce-pagination a").each(function(){let o=e(this).attr("href");o.indexOf("asp_ls=")<0&&o.indexOf("asp_ls&")<0?o.indexOf("?")<0?e(this).attr("href",o+"?"+s):e(this).attr("href",o+"&"+s):e(this).attr("href",e(this).attr("href").replace(/&asp_force_reset_pagination=1/gmi,""))}),i.find(".elementor-pagination a, .elementor-widget-container .woocommerce-pagination a").on("click",function(o){o.preventDefault(),o.stopImmediatePropagation(),o.stopPropagation(),a.showLoader(),a.liveLoad(".asp_es_"+a.o.id,e(this).attr("href"),!1,!0)})}}return a}fixElementorLoadMoreResults(t,n,a,l){let i=e(a).closest("div[data-settings]").data("settings"),r=e(a).find(".asp_e_load_more_anchor");if(i!=null&&i!=""){if(i=JSON.parse(i),i.pagination_type=="load_more_infinite_scroll"&&r.length==0){e(".e-load-more-anchor").css("display","none"),e(a).append('<div class="asp_e_load_more_anchor"></div>'),r=e(a).find(".asp_e_load_more_anchor");let s=function(){r.inViewPort(50)&&(r.trigger("asp_e_load_more"),r.remove())};n.documentEventHandlers.push({node:window,event:"scroll",handler:s}),e(window).on("scroll",s)}if(e(t).find(".e-load-more-spinner").length>0){e(a).removeClass("e-load-more-pagination-loading");let s=e("form",n.n("searchsettings")).serialize()+n.n("text").val().trim()!=n.lastSuccesfulSearch,o=e(a).find(".e-load-more-anchor").next(".elementor-button-wrapper"),c=e(a).find(".e-load-more-message"),f=e(t).find("article");if(f.length>0&&f.parent().length>0&&e(a).find("article").parent().length>0){let d=f.get(0).innerHTML,g=e(a).data("asp-previous-data");g==""||s?(e(a).find("article").parent().get(0).innerHTML=d,e(a).data("asp-previous-data",d),o.css("display","block"),c.css("display","none")):g==d?(o.css("display","none"),c.css("display","block"),r.remove()):(e(a).find("article").parent().get(0).innerHTML+=d,e(a).data("asp-previous-data",d))}else o.css("display","none"),c.css("display","block"),r.remove();return null}}return t}elementorShowSpinner(t){e(t).addClass("e-load-more-pagination-loading"),e(t).find(".e-load-more-spinner>*").addClass("eicon-animation-spin"),e(t).css("opacity",1)}elementorHideSpinner(t){e(t).removeClass("e-load-more-pagination-loading"),e(t).find(".eicon-animation-spin").removeClass("eicon-animation-spin")}}m.addons.add(new v);var x=null,w=m;Object(window.WPD).AjaxSearchPro=u.default})();
