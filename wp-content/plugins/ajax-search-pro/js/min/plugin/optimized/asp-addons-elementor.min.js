(function(){"use strict";var c={};(function(){c.n=function(s){var t=s&&s.__esModule?function(){return s.default}:function(){return s};return c.d(t,{a:t}),t}})(),(function(){c.d=function(s,t){for(var e in t)c.o(t,e)&&!c.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})}})(),(function(){c.o=function(s,t){return Object.prototype.hasOwnProperty.call(s,t)}})();var g={};c.d(g,{default:function(){return b}});var m=Object(window.WPD).AjaxSearchPro,h=c.n(m),_=Object(window.WPD).DoMini,a=c.n(_);const v=h().helpers;class w{name="Elementor Widget Fixes";init(){const{Hooks:t}=v;t.addFilter("asp/live_load/finished",this.finished.bind(this),10,this)}finished(t,e,r,n){const d=a()(n).find(".jet-listing div[data-nav]");if(!r.includes("asp_es_")||d.length===0)return;const o=d.get(0);if(o?.dataset?.nav===void 0||o?.dataset?.nav===null)return;const l=JSON.parse(o.dataset.nav);l.query===void 0&&(l.query={}),l.query.s=e.n("text").val().trim(),l.query.asp_id=e.o.id,o.dataset.nav=JSON.stringify(l)}}h().addons.add(new w);var y=null;const x=h().helpers,{Hooks:u}=x;class P{name="Elementor Widget Fixes";init(){u.addFilter("asp/init/etc",this.fixElementorPostPagination.bind(this),10,this),u.addFilter("asp/live_load/start",this.start.bind(this),10,this),u.addFilter("asp/live_load/finished",this.finished.bind(this),10,this),u.addFilter("asp/live_load/finished",this.fixImages.bind(this),11,this)}fixImages(t,e){a()(".asp_es_"+e.o.id).find("img[nosrcset]").forEach(n=>{a()(n).attr("srcset",a()(n).attr("nosrcset")).removeAttr("nosrcset")})}start(t,e,r,n){const i=e.n("searchsettings").find("form").serialize(),d=e.n("text").val().trim();!(i+d!==e.lastSuccesfulSearch)&&a()(n).find(".e-load-more-spinner").length>0&&a()(n).css("opacity","1"),a()(r).removeClass("e-load-more-pagination-end")}finished(t,e,r,n){const i=a()(n);if(r.includes("asp_es_")&&typeof elementorFrontend<"u"&&typeof elementorFrontend.init<"u"&&i.find(".asp_elementor_nores").length===0){const d=i.data("widget_type")||"";d!==""&&typeof jQuery<"u"&&elementorFrontend.hooks.doAction("frontend/element_ready/"+d,jQuery(i.get(0))),this.fixElementorPostPagination(e,t),e.o.scrollToResults.enabled&&this.scrollToResultsIfNeeded(i),e.n("s").trigger("asp_elementor_results",[e.o.id,e.o.iid,i.get(0)],!0,!0)}}scrollToResultsIfNeeded(t){const e=t.find(".elementor-post, .product").first();e.length&&!e.isInViewport(40)&&e.get(0).scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}fixElementorPostPagination(t,e){const r=a()(".asp_es_"+t.o.id);if(e=e||location.href,!r.length)return t;const n=new URL(e);if(!n.searchParams.size)return t;this.elementorHideSpinner(r.get(0)),n.searchParams.delete("asp_force_reset_pagination");const i=r.find(".e-load-more-anchor"),d=r.find(".elementor-pagination a, .elementor-widget-container .woocommerce-pagination a");if(i.length>0&&!d.length){const o=r.find(".elementor-widget-container").get(0),l=()=>{const f=i.data("page"),p=f?parseInt(f,10)+1:2;n.searchParams.set("page",p.toString()),i.data("next-page",n.href),i.next(".elementor-button-wrapper").find("a").attr("href",n.href)};o&&new MutationObserver(()=>{l(),console.log("Mutation observed: fixing anchor.")}).observe(o,{childList:!0,subtree:!0}),l()}else d.each(function(){const o=a()(this),l=o.attr("href")||"",f=new URL(l,window.location.origin);f.searchParams.has("asp_ls")?f.searchParams.delete("asp_force_reset_pagination"):n.searchParams.forEach((p,S)=>f.searchParams.set(S,p)),o.attr("href",f.href)});return t}elementorHideSpinner(t){a()(t).removeClass("e-load-more-pagination-loading").find(".eicon-animation-spin").removeClass("eicon-animation-spin")}}h().addons.add(new P);var O=null,b=m;Object(window.WPD).AjaxSearchPro=g.default})();
