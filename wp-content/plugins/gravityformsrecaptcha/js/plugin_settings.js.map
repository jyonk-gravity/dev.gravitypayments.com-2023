{"version":3,"file":"./js/plugin_settings.js","mappings":";;;;AAAA;;AAEA,CAAE,UAAEA,CAAC,EAAM;EACV;AACD;AACA;AACA;AACA;AACA;AACA;EACC,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA,EAAS;IACjC,IAAMC,UAAU,GAAG,CAAC,CAAC;;IAErB;AACF;AACA;AACA;AACA;AACA;AACA;IACEA,UAAU,CAACC,IAAI,GAAG,YAAM;MACvBD,UAAU,CAACE,aAAa,CAAC,CAAC;MAC1BF,UAAU,CAACG,iBAAiB,CAAC,CAAC;IAC/B,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEH,UAAU,CAACE,aAAa,GAAG,YAAM;MAChCF,UAAU,CAACI,SAAS,GAAGN,CAAC,CAAE,kCAAmC,CAAC;MAC9DE,UAAU,CAACK,MAAM,GAAG;QACnBC,OAAO,EAAER,CAAC,CAAE,0CAA2C,CAAC;QACxDS,SAAS,EAAET,CAAC,CAAE,4CAA6C,CAAC;QAC5DU,KAAK,EAAEV,CAAC,CAAE,uCAAwC,CAAC;QACnDW,IAAI,EAAEX,CAAC,CAAE,sCAAuC;MACjD,CAAC;IACF,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEE,UAAU,CAACG,iBAAiB,GAAG,YAAM;MACpCH,UAAU,CAACK,MAAM,CAACC,OAAO,CAACI,EAAE,CAAE,QAAQ,EAAEC,MAAM,CAACC,aAAc,CAAC;MAC9DZ,UAAU,CAACK,MAAM,CAACE,SAAS,CAACG,EAAE,CAAE,QAAQ,EAAEC,MAAM,CAACC,aAAc,CAAC;MAChEZ,UAAU,CAACK,MAAM,CAACI,IAAI,CAACC,EAAE,CAAE,QAAQ,EAAE;QAAA,OAAMC,MAAM,CAACC,aAAa,CAAC,CAAC;MAAA,CAAC,CAAC;IACpE,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACED,MAAM,CAACC,aAAa,GAAG,YAAM;MAC5B,IAAMC,IAAI,GAAG,CAAC,CAAC;;MAEf;AACH;AACA;AACA;AACA;AACA;AACA;MACGA,IAAI,CAACZ,IAAI,GAAG,YAAM;QACjBD,UAAU,CAACc,SAAS,GAAGhB,CAAC,CAAE,YAAa,CAAC;QACxCE,UAAU,CAACe,IAAI,GAAGjB,CAAC,CAAE,sBAAuB,CAAC;QAC7Ce,IAAI,CAACG,kBAAkB,CAAC,CAAC;;QAEzB;QACA;QACAlB,CAAC,CAAE,4CAA6C,CAAC,CAACmB,MAAM,CAAC,CAAC;;QAE1D;QACA,IAAK,CAAEJ,IAAI,CAACK,cAAc,CAAC,CAAC,EAAG;UAC9BL,IAAI,CAACM,aAAa,CAAC,CAAC;UACpB;QACD;QAEAN,IAAI,CAACO,qBAAqB,CAAC,CAAC;MAC7B,CAAC;;MAED;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACGP,IAAI,CAACQ,MAAM,GAAG,UAAEC,SAAS,EAAM;QAC9B;QACAC,UAAU,CAACF,MAAM,CAChB,WAAW,EACX;UACCG,OAAO,EAAExB,UAAU,CAACK,MAAM,CAACC,OAAO,CAACmB,GAAG,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;UAC/CC,IAAI,EAAEL,SAAS,KAAK,WAAW,GAAGA,SAAS,GAAG,EAAE;UAChDM,KAAK,EAAE,QAAQ;UACf,gBAAgB,EAAE,SAAlBC,aAAgBA,CAAA,EAAQ,CAAC,CAAC;UAC1BC,QAAQ,EAAE,SAAVA,QAAQA,CAAA;YAAA,OAAQ9B,UAAU,CAACe,IAAI,CAACgB,IAAI,CAAE,UAAU,EAAE,KAAM,CAAC;UAAA;QAC1D,CACD,CAAC;MACF,CAAC;;MAED;AACH;AACA;AACA;AACA;AACA;AACA;MACGlB,IAAI,CAACG,kBAAkB,GAAG,YAAM;QAC/BL,MAAM,CAACqB,iBAAiB,CAACC,OAAO,GAAG,CAAC,CAAC;QACrCtB,MAAM,CAACqB,iBAAiB,CAACE,KAAK,GAAG,CAAC;QAClClC,UAAU,CAACc,SAAS,CAACqB,IAAI,CAAE,EAAG,CAAC;QAC/BnC,UAAU,CAACK,MAAM,CAACG,KAAK,CAACiB,GAAG,CAAE,GAAI,CAAC;MACnC,CAAC;;MAED;AACH;AACA;AACA;AACA;AACA;AACA;MACGZ,IAAI,CAACK,cAAc,GAAG,YAAM;QAC3B,OAAOlB,UAAU,CAACK,MAAM,CAACC,OAAO,CAACmB,GAAG,CAAC,CAAC,IAAIzB,UAAU,CAACK,MAAM,CAACE,SAAS,CAACkB,GAAG,CAAC,CAAC;MAC5E,CAAC;;MAED;AACH;AACA;AACA;AACA;AACA;AACA;MACGZ,IAAI,CAACM,aAAa,GAAG,YAAM;QAC1BnB,UAAU,CAACe,IAAI,CAACgB,IAAI,CAAE,UAAU,EAAE,KAAM,CAAC;QACzC/B,UAAU,CAACI,SAAS,CAACgC,IAAI,CAAC,CAAC;MAC5B,CAAC;;MAED;AACH;AACA;AACA;AACA;AACA;AACA;MACGvB,IAAI,CAACO,qBAAqB,GAAG,YAAM;QAClC,IAAME,SAAS,GAAGxB,CAAC,CAAE,8CAA+C,CAAC,CAAC2B,GAAG,CAAC,CAAC;QAE3E,IAAK,CAAEH,SAAS,EAAG;UAClB;QACD;QAEAT,IAAI,CAACQ,MAAM,CAAEC,SAAU,CAAC;QAExB,QAASA,SAAS;UACjB,KAAK,UAAU;YACdxB,CAAC,CAAE,wDAAyD,CAAC,CAACuC,IAAI,CAAC,CAAC;YACpE;UACD,KAAK,WAAW;YACfvC,CAAC,CAAE,wDAAyD,CAAC,CAACsC,IAAI,CAAC,CAAC;YACpE;UACD;YACC,MAAM,IAAIE,KAAK,CAAE,2BAA4B,CAAC;QAChD;QAEAtC,UAAU,CAACI,SAAS,CAACiC,IAAI,CAAC,CAAC;QAE3B,IAAKf,SAAS,KAAK,WAAW,EAAG;UAChCC,UAAU,CAACgB,OAAO,CAAC,CAAC;QACrB;MACD,CAAC;MAED1B,IAAI,CAACZ,IAAI,CAAC,CAAC;IACZ,CAAC;IAEDD,UAAU,CAACC,IAAI,CAAC,CAAC;EAClB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACC,IAAMuC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA,EAAS;IACjC,IAAMC,UAAU,GAAG,CAAC,CAAC;;IAErB;AACF;AACA;AACA;AACA;AACA;AACA;IACEA,UAAU,CAACxC,IAAI,GAAG,YAAM;MACvBwC,UAAU,CAACC,KAAK,GAAG,EAAE;MACrBD,UAAU,CAACE,OAAO,GAAGC,kCAAkC;MAEvDH,UAAU,CAACvC,aAAa,CAAC,CAAC;MAC1BuC,UAAU,CAACI,cAAc,CAAC,CAAC;MAC3BJ,UAAU,CAACtC,iBAAiB,CAAC,CAAC;IAC/B,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEsC,UAAU,CAACvC,aAAa,GAAG,YAAM;MAChCuC,UAAU,CAACpC,MAAM,GAAG;QACnBC,OAAO,EAAE,cAAc;QACvBC,SAAS,EAAE,gBAAgB;QAC3BuC,SAAS,EAAE,qBAAqB;QAChCC,YAAY,EAAE,mBAAmB;QACjCC,UAAU,EAAE;MACb,CAAC;MAEDP,UAAU,CAACQ,KAAK,GAAG;QAClB3C,OAAO,EAAER,CAAC,CAAE2C,UAAU,CAACpC,MAAM,CAACC,OAAQ,CAAC;QACvCC,SAAS,EAAET,CAAC,CAAE2C,UAAU,CAACpC,MAAM,CAACE,SAAU,CAAC;QAC3CyC,UAAU,EAAElD,CAAC,CAAE2C,UAAU,CAACpC,MAAM,CAAC2C,UAAW,CAAC;QAC7CjC,IAAI,EAAEjB,CAAC,CAAE,sBAAuB;MACjC,CAAC;IACF,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACE2C,UAAU,CAACtC,iBAAiB,GAAG,YAAM;MACpC,IAAK,CAAEsC,UAAU,CAACE,OAAO,CAACO,QAAQ,CAACC,MAAM,EAAG;QAC3C;MACD;MAEArD,CAAC,CAAE2C,UAAU,CAACpC,MAAM,CAACC,OAAQ,CAAC,CAACI,EAAE,CAAE,OAAO,EAAE;QAAA,OAAM+B,UAAU,CAACW,uBAAuB,CAAC,CAAC;MAAA,CAAC,CAAC;MACxFtD,CAAC,CAAE2C,UAAU,CAACpC,MAAM,CAACE,SAAU,CAAC,CAACG,EAAE,CAAE,OAAO,EAAE;QAAA,OAAM+B,UAAU,CAACW,uBAAuB,CAAC,CAAC;MAAA,CAAC,CAAC;IAC3F,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEX,UAAU,CAACW,uBAAuB,GAAG,YAAM;MAC1CX,UAAU,CAACY,UAAU,CAAEZ,UAAU,CAACQ,KAAK,CAAC3C,OAAO,CAACgD,OAAO,CAAE,kCAAmC,CAAE,CAAC;MAC/Fb,UAAU,CAACY,UAAU,CAAEZ,UAAU,CAACQ,KAAK,CAAC1C,SAAS,CAAC+C,OAAO,CAAE,kCAAmC,CAAE,CAAC;IAClG,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACEb,UAAU,CAACc,iBAAiB,GAAG,YAAM;MACpC,OAAO,IAAIC,OAAO,CAAE,UAAEC,OAAO,EAAEC,MAAM,EAAM;QAC1C,IAAMC,gBAAgB,GAAGlB,UAAU,CAACQ,KAAK,CAAC3C,OAAO,CAACgD,OAAO,CAAE,kCAAmC,CAAC;QAE/F,IAAI;UACH,IAAQhD,OAAO,GAAKmC,UAAU,CAACQ,KAAK,CAA5B3C,OAAO;UACf,IAAMsD,YAAY,GAAGtD,OAAO,CAACmB,GAAG,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;UAEzC,IAAK,CAAC,KAAKkC,YAAY,CAACT,MAAM,EAAG;YAChCV,UAAU,CAACY,UAAU,CAAEM,gBAAiB,CAAC;YACzClB,UAAU,CAACY,UAAU,CAAEZ,UAAU,CAACQ,KAAK,CAACD,UAAU,CAACM,OAAO,CAAE,kCAAmC,CAAE,CAAC;YAClGxD,CAAC,CAAE2C,UAAU,CAACpC,MAAM,CAAC2C,UAAW,CAAC,CAACa,IAAI,CAAE,OAAQ,CAAC,CAACpC,GAAG,CAAE,GAAI,CAAC;YAE5D;UACD;UAEAF,UAAU,CAACuC,KAAK,CAAE,YAAM;YACvB,IAAI;cACHvC,UAAU,CAACgB,OAAO,CAAEqB,YAAY,EAAE;gBAAEG,MAAM,EAAE;cAAS,CAAE,CAAC,CAACC,IAAI,CAAE,UAAEtB,KAAK,EAAM;gBAC3Ee,OAAO,CAAEf,KAAM,CAAC;cACjB,CAAE,CAAC;YACJ,CAAC,CAAC,OAAQuB,KAAK,EAAG;cACjBP,MAAM,CAAEO,KAAM,CAAC;YAChB;UACD,CAAE,CAAC;QACJ,CAAC,CAAC,OAAQA,KAAK,EAAG;UACjBP,MAAM,CAAEO,KAAM,CAAC;QAChB;MACD,CAAE,CAAC;IACJ,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACExB,UAAU,CAACI,cAAc,GAAG,YAAM;MACjC,IAAMc,gBAAgB,GAAGlB,UAAU,CAACQ,KAAK,CAAC3C,OAAO,CAACgD,OAAO,CAAE,kCAAmC,CAAC;MAC/F,IAAMY,kBAAkB,GAAGzB,UAAU,CAACQ,KAAK,CAAC1C,SAAS,CAAC+C,OAAO,CAAE,kCAAmC,CAAC;MACnG,IAAMa,eAAe,GAAGrE,CAAC,CAAE2C,UAAU,CAACpC,MAAM,CAAC2C,UAAW,CAAC,CAACa,IAAI,CAAE,OAAQ,CAAC;MAEzE,IAAK,CAAE/D,CAAC,CAAE2C,UAAU,CAACpC,MAAM,CAACC,OAAQ,CAAC,CAACmB,GAAG,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAACyB,MAAM,EAAG;QAC3DV,UAAU,CAACY,UAAU,CAAEM,gBAAiB,CAAC;QACzClB,UAAU,CAACY,UAAU,CAAEa,kBAAmB,CAAC;QAC3CC,eAAe,CAAC1C,GAAG,CAAE,GAAI,CAAC;QAC1B;MACD;MAEAgB,UAAU,CAACc,iBAAiB,CAAC,CAAC,CAC5BS,IAAI,CAAE,UAAEtB,KAAK,EAAM;QACnBD,UAAU,CAACC,KAAK,GAAGA,KAAK;MACzB,CAAE,CAAC,CACF0B,KAAK,CAAE,YAAM;QACb3B,UAAU,CAAC4B,UAAU,CAAEV,gBAAiB,CAAC;QACzClB,UAAU,CAAC4B,UAAU,CAAEH,kBAAmB,CAAC;QAC3CC,eAAe,CAAC1C,GAAG,CAAE,GAAI,CAAC;MAC3B,CAAE,CAAC,CACF6C,OAAO,CAAE,YAAM;QACfxE,CAAC,CAACyE,IAAI,CACL;UACCC,MAAM,EAAE,MAAM;UACdC,QAAQ,EAAE,MAAM;UAChBC,GAAG,EAAEC,OAAO;UACZC,IAAI,EAAE;YACLb,MAAM,EAAE,mBAAmB;YAC3Bc,KAAK,EAAEpC,UAAU,CAACE,OAAO,CAACkC,KAAK;YAC/BnC,KAAK,EAAED,UAAU,CAACC,KAAK;YACvBoC,WAAW,EAAEhF,CAAC,CAAE2C,UAAU,CAACpC,MAAM,CAACC,OAAQ,CAAC,CAACmB,GAAG,CAAC,CAAC;YACjDsD,aAAa,EAAEjF,CAAC,CAAE2C,UAAU,CAACpC,MAAM,CAACE,SAAU,CAAC,CAACkB,GAAG,CAAC;UACrD;QACD,CACD,CAAC,CAACuC,IAAI,CAAE,UAAEgB,QAAQ,EAAM;UACvB,QAASA,QAAQ,CAACJ,IAAI,CAACK,WAAW;YACjC,KAAK,GAAG;cACPxC,UAAU,CAACyC,QAAQ,CAAEvB,gBAAiB,CAAC;cACvClB,UAAU,CAACyC,QAAQ,CAAEhB,kBAAmB,CAAC;cACzCC,eAAe,CAAC1C,GAAG,CAAE,GAAI,CAAC;cAC1B;YACD,KAAK,GAAG;cACPgB,UAAU,CAAC4B,UAAU,CAAEV,gBAAiB,CAAC;cACzClB,UAAU,CAAC4B,UAAU,CAAEH,kBAAmB,CAAC;cAC3CC,eAAe,CAAC1C,GAAG,CAAE,GAAI,CAAC;cAC1B;YACD;cACCgB,UAAU,CAACY,UAAU,CAAEM,gBAAiB,CAAC;cACzClB,UAAU,CAACY,UAAU,CAAEa,kBAAmB,CAAC;cAC3CC,eAAe,CAAC1C,GAAG,CAAE,GAAI,CAAC;UAC5B;QACD,CAAE,CAAC;MACJ,CAAE,CAAC;IACL,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACEgB,UAAU,CAACY,UAAU,GAAG,UAAE8B,EAAE,EAAM;MACjCA,EAAE,CAACC,WAAW,CAAE,mDAAoD,CAAC;MACrED,EAAE,CAACC,WAAW,CAAE,iDAAkD,CAAC;IACpE,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE3C,UAAU,CAACyC,QAAQ,GAAG,UAAEC,EAAE,EAAM;MAC/BA,EAAE,CAACE,QAAQ,CAAE,mDAAoD,CAAC;MAClEF,EAAE,CAACC,WAAW,CAAE,iDAAkD,CAAC;IACpE,CAAC;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE3C,UAAU,CAAC4B,UAAU,GAAG,UAAEc,EAAE,EAAM;MACjCA,EAAE,CAACC,WAAW,CAAE,mDAAoD,CAAC;MACrED,EAAE,CAACE,QAAQ,CAAE,iDAAkD,CAAC;IACjE,CAAC;IAED5C,UAAU,CAACxC,IAAI,CAAC,CAAC;EAClB,CAAC;EAEDH,CAAC,CAAEwF,QAAS,CAAC,CAACxB,KAAK,CAAE,YAAM;IAE1B,IAAIyB,KAAK,GAAKzF,CAAC,CAAE,iBAAkB,CAAC;IACpC,IAAI0F,OAAO,GAAGD,KAAK,CAAC1B,IAAI,CAAE,mCAAoC,CAAC;IAE/D,IAAK,yBAAyB,KAAK2B,OAAO,CAAC/D,GAAG,CAAC,CAAC,EAAG;MAClDe,mBAAmB,CAAC,CAAC;IACtB,CAAC,MAAM,IAAK,iBAAiB,KAAKgD,OAAO,CAAC/D,GAAG,CAAC,CAAC,EAAG;MACjD1B,mBAAmB,CAAC,CAAC;IACtB;IAEA,IAAK6C,kCAAkC,CAAC6C,aAAa,EAAG;MACvD,IAAI7D,KAAK,GAAG0D,QAAQ,CAACI,aAAa,CAAC,mBAAmB,CAAC;MACvD,IAAK9D,KAAK,EAAG;QACZA,KAAK,CAAC+D,KAAK,CAACC,UAAU,GAAG,QAAQ;MAClC;IACD;;IAGA;IACA,IAAIC,WAAW,GAAG/F,CAAC,CAAE,yBAA0B,CAAC;IAChD,IAAK+F,WAAW,CAAC1C,MAAM,GAAG,CAAC,EAAG;MAC7B0C,WAAW,CAACnF,EAAE,CAAE,OAAO,EAAE,UAAUoF,CAAC,EAAG;QACtCA,CAAC,CAACC,cAAc,CAAC,CAAC;;QAElB;QACA,IAAIC,YAAY,GAAGlG,CAAC,CAAE,cAAe,CAAC;QACtC,IAAImG,YAAY,GAAGnG,CAAC,CAAE,cAAe,CAAC;QACtC,IAAIoG,gBAAgB,GAAG,KAAK;QAC5B,IAAKF,YAAY,CAAC7C,MAAM,GAAG,CAAC,IAAI6C,YAAY,CAACvE,GAAG,CAAC,CAAC,KAAK,EAAE,EAAG;UAC3DyE,gBAAgB,GAAG,IAAI;QACxB;QACA,IAAKD,YAAY,CAAC9C,MAAM,GAAG,CAAC,IAAI8C,YAAY,CAACxE,GAAG,CAAC,CAAC,KAAK,EAAE,EAAG;UAC3DyE,gBAAgB,GAAG,IAAI;QACxB;;QAEA;QACA,IAAKA,gBAAgB,IAAIL,WAAW,CAACM,QAAQ,CAAE,wBAAyB,CAAC,EAAG;UAC3E,IAAKN,WAAW,CAACM,QAAQ,CAAE,wBAAyB,CAAC,EAAG;YACvD,IAAIC,KAAK,GAAGxD,kCAAkC,CAACyD,gBAAgB;YAC/D,IAAIC,OAAO,GAAG1D,kCAAkC,CAAC2D,kBAAkB;UACpE,CAAC,MAAM;YACN,IAAIH,KAAK,GAAGxD,kCAAkC,CAAC4D,4BAA4B;YAC3E,IAAIF,OAAO,GAAG1D,kCAAkC,CAAC6D,8BAA8B;UAChF;UACA,IAAI,OAAOC,KAAK,CAACC,SAAS,CAACC,kBAAkB,KAAK,UAAU,EAAG;YAC9D,IAAI,CAAEC,OAAO,CAAEP,OAAQ,CAAC,EAAG;cAC1B;YACD;UACD,CAAC,MAAM;YACNI,KAAK,CAACC,SAAS,CAACC,kBAAkB,CAAER,KAAK,EAAEE,OAAQ,CAAC,CAACtC,IAAI,CAAC,UAAC8C,aAAa,EAAK;cAC5E,IAAI,CAACA,aAAa,EAAE;gBACnB;cACD;YACD,CAAC,CAAC;UACH;QACD;QAEA,IAAKjB,WAAW,CAACM,QAAQ,CAAE,wBAAyB,CAAC,EAAG;UACvDN,WAAW,CAAC1D,IAAI,CAAES,kCAAkC,CAACmE,sBAAuB,CAAC;QAC9E,CAAC,MAAM;UACNlB,WAAW,CAAC1D,IAAI,CAAES,kCAAkC,CAACoE,UAAW,CAAC;QAClE;QAEA,IAAIC,UAAU,GAAGC,MAAM,CAACC,WAAW,CAAErB,CAAC,CAACsB,MAAM,CAACC,IAAK,CAAC;QACpD,IAAIC,WAAW,GAAGL,UAAU,CAACpC,KAAK;;QAElC;QACA/E,CAAC,CAACyH,IAAI,CACL5C,OAAO,EACP;UACCZ,MAAM,EAAE,sBAAsB;UAC9Bc,KAAK,EAAEyC;QACR,CAAC,EACD,UAAUtC,QAAQ,EAAG;UACpBrE,MAAM,CAAC6G,QAAQ,CAACH,IAAI,GAAG1G,MAAM,CAAC6G,QAAQ,CAACH,IAAI;QAC5C,CACD,CAAC;MACF,CAAE,CAAC;IACJ;;IAEA;IACA9B,KAAK,CAAC7E,EAAE,CAAE,QAAQ,EAAE,UAAUoF,CAAC,EAAG;MAEjC;MACA,IAAKP,KAAK,CAAC1B,IAAI,CAAE,gCAAiC,CAAC,CAACV,MAAM,KAAK,CAAC,EAAG;QAClE;QACA2C,CAAC,CAACC,cAAc,CAAC,CAAC;;QAElB;QACA,IAAI0B,YAAY,GAAGlC,KAAK,CAAC1B,IAAI,CAAE,sBAAuB,CAAC;QACvD,IAAI6D,gBAAgB,GAAGnC,KAAK,CAAC1B,IAAI,CAAE,iDAAiD,CAAC,CAACpC,GAAG,CAAC,CAAC;;QAE3F;QACA,IAAI6F,WAAW,GAAG/B,KAAK,CAAC1B,IAAI,CAAE,+BAA+B,CAAC,CAACpC,GAAG,CAAC,CAAC;QAEpE,IAAKiG,gBAAgB,KAAK,YAAY,EAAG;UACxC;UACA5H,CAAC,CAACyH,IAAI,CACL5C,OAAO,EACP;YACCZ,MAAM,EAAE,0BAA0B;YAClCc,KAAK,EAAEyC,WAAW;YAClBK,IAAI,EAAED;UACP,CAAC,EACD,UAAU1C,QAAQ,EAAG;YACpB,IAAK,CAAEA,QAAQ,CAACJ,IAAI,CAACgD,MAAM,EAAG;cAC7BjH,MAAM,CAAC6G,QAAQ,CAACH,IAAI,GAAGrC,QAAQ,CAACJ,IAAI,CAACiD,QAAQ;YAC9C;UACD,CAAC,EACD,MACD,CAAC;QACF,CAAC,MAAM;UACN;UACA/H,CAAC,CAACyH,IAAI,CACL5C,OAAO,EACP;YACCZ,MAAM,EAAE,wBAAwB;YAChCc,KAAK,EAAEyC,WAAW;YAClBQ,eAAe,EAAEJ;UAClB,CAAC,EACD,UAAU1C,QAAQ,EAAG;YACpB,IAAK,CAAEA,QAAQ,CAACJ,IAAI,CAACgD,MAAM,EAAG;cAC7B,IAAMlD,GAAG,GAAG,IAAIqD,GAAG,CAAE/C,QAAQ,CAACJ,IAAI,CAACiD,QAAS,CAAC;cAC7CnD,GAAG,CAACsD,YAAY,CAACC,GAAG,CAAE,iBAAiB,EAAEP,gBAAiB,CAAC;cAC3D/G,MAAM,CAAC6G,QAAQ,CAACH,IAAI,GAAG3C,GAAG;YAC3B;UACD,CAAC,EACD,MACD,CAAC;QACF;QAEA;MACD;MAEA,IAAK,yBAAyB,KAAKc,OAAO,CAAC/D,GAAG,CAAC,CAAC,EAAG;QAClDqE,CAAC,CAACC,cAAc,CAAC,CAAC;;QAElB;QACA,IAAImC,iBAAiB,GAAI3C,KAAK,CAAC1B,IAAI,CAAE,kCAAmC,CAAC,CAACA,IAAI,CAAE,WAAY,CAAC;QAC7F,IAAIsE,kBAAkB,GAAG5C,KAAK,CAAC1B,IAAI,CAAE,gCAAiC,CAAC;QAEvE/D,CAAC,CAACyH,IAAI,CACL5C,OAAO,EACP;UACCZ,MAAM,EAAE,gCAAgC;UACxCqE,cAAc,EAAEF,iBAAiB,CAACzG,GAAG,CAAC,CAAC;UACvC4G,UAAU,EAAEH,iBAAiB,CAACtD,IAAI,CAAE,YAAa,CAAC;UAClD0D,YAAY,EAAEJ,iBAAiB,CAACtD,IAAI,CAAE,cAAe,CAAC;UACtD2D,sBAAsB,EAAEJ,kBAAkB,CAAC1G,GAAG,CAAC,CAAC;UAChD+G,qBAAqB,EAAEL,kBAAkB,CAACvD,IAAI,CAAC,uBAAuB,CAAC;UACvE6D,kBAAkB,EAAElD,KAAK,CAAC1B,IAAI,CAAE,qBAAsB,CAAC,CAACpC,GAAG,CAAC,CAAC;UAC7DiH,gBAAgB,EAAEnD,KAAK,CAAC1B,IAAI,CAAE,+CAAgD,CAAC,CAACpC,GAAG,CAAC,CAAC;UACrFoD,KAAK,EAAEU,KAAK,CAAC1B,IAAI,CAAE,+BAAgC,CAAC,CAACpC,GAAG,CAAC;QAC1D,CAAC,EACD,UAAUuD,QAAQ,EAAG;UACpB,IAAKA,QAAQ,CAAC2D,OAAO,EAAG;YACvBhI,MAAM,CAAC6G,QAAQ,CAACH,IAAI,GAAGrC,QAAQ,CAAC,MAAM,CAAC;UACxC;QACD,CACD,CAAC;MACF;IACD,CAAE,CAAC;;IAEH;IACAlF,CAAC,CAAE,oBAAqB,CAAC,CAACY,EAAE,CAAE,QAAQ,EAAE,UAAUoF,CAAC,EAAG;MAErD,IAAI8C,OAAO,GAAG9I,CAAC,CAAE,IAAK,CAAC,CAAC+D,IAAI,CAAE,WAAY,CAAC;MAC3C,IAAIgB,KAAK,GAAG/E,CAAC,CAAE,MAAO,CAAC,CAAC+D,IAAI,CAAE,+BAAgC,CAAC,CAACpC,GAAG,CAAC,CAAC;MAErE3B,CAAC,CAAE,sBAAuB,CAAC,CAACqC,IAAI,CAAE,kBAAkB,GAAGS,kCAAkC,CAACiG,OAAO,GAAG,MAAO,CAAC;MAC5G/I,CAAC,CAACyH,IAAI,CACL5C,OAAO,EACP;QACCZ,MAAM,EAAE,0BAA0B;QAClC+E,OAAO,EAAEF,OAAO,CAACnH,GAAG,CAAC,CAAC;QACtBoD,KAAK,EAAEA;MACR,CAAC,EACD,UAAUG,QAAQ,EAAG;QACpB,IAAKA,QAAQ,CAAC2D,OAAO,EAAG;UACvB,IAAMI,QAAQ,GAAG/D,QAAQ,CAAC,MAAM,CAAC;UAEjC,IAAMgE,MAAM,GAAG1D,QAAQ,CAAC2D,aAAa,CAAE,QAAS,CAAC;UACjDD,MAAM,CAACE,IAAI,GAAI,qBAAqB;UAEpC,IAAMC,KAAK,GAAS7D,QAAQ,CAAC2D,aAAa,CAAE,OAAQ,CAAC;UACrDE,KAAK,CAACC,WAAW,GAAG,qBAAqB;UACzCD,KAAK,CAACE,YAAY,CAAE,KAAK,EAAE,qBAAsB,CAAC;UAClDF,KAAK,CAACG,SAAS,CAACC,GAAG,CAAE,sBAAuB,CAAC;UAE7C,IAAMC,MAAM,GAAGlE,QAAQ,CAAC2D,aAAa,CAAE,KAAM,CAAC;UAC9CO,MAAM,CAACF,SAAS,CAACC,GAAG,CAAE,8BAA+B,CAAC;UACtDC,MAAM,CAACC,WAAW,CAAEN,KAAM,CAAC;UAE3B,IAAMO,aAAa,GAASpE,QAAQ,CAAC2D,aAAa,CAAE,QAAS,CAAC;UAC9DS,aAAa,CAACC,KAAK,GAAS,EAAE;UAC9BD,aAAa,CAACN,WAAW,GAAG,mBAAmB;UAC/CJ,MAAM,CAACS,WAAW,CAAEC,aAAc,CAAC;UAEnCX,QAAQ,CAACa,OAAO,CAAE,UAAAC,GAAG,EAAI;YACxB,IAAMC,MAAM,GAASxE,QAAQ,CAAC2D,aAAa,CAAE,QAAS,CAAC;YACvDa,MAAM,CAACH,KAAK,GAASE,GAAG,CAACF,KAAK;YAC9BG,MAAM,CAACV,WAAW,GAAGS,GAAG,CAACE,WAAW;YACpCD,MAAM,CAACT,YAAY,CAAE,4BAA4B,EAAEQ,GAAG,CAACE,WAAY,CAAC;YACpEf,MAAM,CAACS,WAAW,CAAEK,MAAO,CAAC;UAC7B,CAAE,CAAC;UAEH,IAAM1J,SAAS,GAAOkF,QAAQ,CAACI,aAAa,CAAE,sBAAuB,CAAC;UACtEtF,SAAS,CAAC4J,SAAS,GAAG,EAAE;UACxB5J,SAAS,CAACqJ,WAAW,CAAED,MAAO,CAAC;UAC/BpJ,SAAS,CAACqJ,WAAW,CAAET,MAAO,CAAC;QAChC,CAAC,MAAM;UACNlJ,CAAC,CAAE,sBAAuB,CAAC,CAACqC,IAAI,CAAE,EAAG,CAAC;QACvC;MACD,CACD,CAAC;IACF,CAAE,CAAC;IAEHuE,KAAK,CAACuD,UAAU,CAACC,oBAAoB,CAAE,iBAAkB,CAAC;EAC3D,CAAE,CAAC;AACJ,CAAC,EAAIC,MAAO,CAAC,C","sources":["webpack://gravityformsrecaptcha/./js/src/plugin_settings.js"],"sourcesContent":["/* global jQuery, gform, grecaptcha, gforms_recaptcha_recaptcha_strings */\n\n( ( $ ) => {\n\t/**\n\t * Handles reCAPTCHA v2 plugin settings validation.\n\t *\n\t * @since 1.0\n\t *\n\t * @return {void}\n\t */\n\tconst recaptchaV2Settings = () => {\n\t\tconst v2Settings = {};\n\n\t\t/**\n\t\t * Initialize reCAPTCHA v2 settings.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tv2Settings.init = () => {\n\t\t\tv2Settings.cacheElements();\n\t\t\tv2Settings.addEventListeners();\n\t\t};\n\n\t\t/**\n\t\t * Cache the fields used by this handler.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tv2Settings.cacheElements = () => {\n\t\t\tv2Settings.container = $( 'div[id=\"gform_setting_reset_v2\"]' );\n\t\t\tv2Settings.fields = {\n\t\t\t\tsiteKey: $( 'input[name=\"_gform_setting_site_key_v2\"]' ),\n\t\t\t\tsecretKey: $( 'input[name=\"_gform_setting_secret_key_v2\"]' ),\n\t\t\t\treset: $( 'input[name=\"_gform_setting_reset_v2\"]' ),\n\t\t\t\ttype: $( 'input[name=\"_gform_setting_type_v2\"]' ),\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t\t * Add event listeners for this handler.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tv2Settings.addEventListeners = () => {\n\t\t\tv2Settings.fields.siteKey.on( 'change', window.loadRecaptcha );\n\t\t\tv2Settings.fields.secretKey.on( 'change', window.loadRecaptcha );\n\t\t\tv2Settings.fields.type.on( 'change', () => window.loadRecaptcha() );\n\t\t};\n\n\t\t/**\n\t\t * Handles showing and hiding the reCAPTCHA itself.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\twindow.loadRecaptcha = () => {\n\t\t\tconst self = {};\n\n\t\t\t/**\n\t\t\t * Initialize the reCAPTCHA rendering process.\n\t\t\t *\n\t\t\t * @since 1.0\n\t\t\t *\n\t\t\t * @return {void}\n\t\t\t */\n\t\t\tself.init = () => {\n\t\t\t\tv2Settings.recaptcha = $( '#recaptcha' );\n\t\t\t\tv2Settings.save = $( '#gform-settings-save' );\n\t\t\t\tself.flushExistingState();\n\n\t\t\t\t// Reset key status.\n\t\t\t\t// Note: recaptcha is misspelled here for legacy reasons.\n\t\t\t\t$( '#recpatcha .gform-settings-field__feedback' ).remove();\n\n\t\t\t\t// If no public or private key is provided, exit.\n\t\t\t\tif ( ! self.canBeDisplayed() ) {\n\t\t\t\t\tself.hideRecaptcha();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tself.showSelectedRecaptcha();\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Renders the v2 reCAPTCHA.\n\t\t\t *\n\t\t\t * @since 1.0\n\t\t\t *\n\t\t\t * @param {string} typeValue The selected type to render.\n\t\t\t *\n\t\t\t * @return {void}\n\t\t\t */\n\t\t\tself.render = ( typeValue ) => {\n\t\t\t\t// Render reCAPTCHA.\n\t\t\t\tgrecaptcha.render(\n\t\t\t\t\t'recaptcha',\n\t\t\t\t\t{\n\t\t\t\t\t\tsitekey: v2Settings.fields.siteKey.val().trim(),\n\t\t\t\t\t\tsize: typeValue === 'invisible' ? typeValue : '',\n\t\t\t\t\t\tbadge: 'inline',\n\t\t\t\t\t\t'error-callback': () => {},\n\t\t\t\t\t\tcallback: () => v2Settings.save.prop( 'disabled', false ),\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Flush the existing state of the reCAPTCHA handler.\n\t\t\t *\n\t\t\t * @since 1.0\n\t\t\t *\n\t\t\t * @return {void}\n\t\t\t */\n\t\t\tself.flushExistingState = () => {\n\t\t\t\twindow.___grecaptcha_cfg.clients = {};\n\t\t\t\twindow.___grecaptcha_cfg.count = 0;\n\t\t\t\tv2Settings.recaptcha.html( '' );\n\t\t\t\tv2Settings.fields.reset.val( '1' );\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Determines whether the reCAPTCHA can be shown.\n\t\t\t *\n\t\t\t * @since 1.0\n\t\t\t *\n\t\t\t * @return {boolean} Whether the reCAPTCHA can be shown.\n\t\t\t */\n\t\t\tself.canBeDisplayed = () => {\n\t\t\t\treturn v2Settings.fields.siteKey.val() && v2Settings.fields.secretKey.val();\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Hides the reCAPTCHA element.\n\t\t\t *\n\t\t\t * @since 1.0\n\t\t\t *\n\t\t\t * @return {void}\n\t\t\t */\n\t\t\tself.hideRecaptcha = () => {\n\t\t\t\tv2Settings.save.prop( 'disabled', false );\n\t\t\t\tv2Settings.container.hide();\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Show the selected reCAPTCHA type.\n\t\t\t *\n\t\t\t * @since 1.0\n\t\t\t *\n\t\t\t * @return {void}\n\t\t\t */\n\t\t\tself.showSelectedRecaptcha = () => {\n\t\t\t\tconst typeValue = $( 'input[name=\"_gform_setting_type_v2\"]:checked' ).val();\n\n\t\t\t\tif ( ! typeValue ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tself.render( typeValue );\n\n\t\t\t\tswitch ( typeValue ) {\n\t\t\t\t\tcase 'checkbox':\n\t\t\t\t\t\t$( '#gforms_checkbox_recaptcha_message, label[for=\"reset\"]' ).show();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'invisible':\n\t\t\t\t\t\t$( '#gforms_checkbox_recaptcha_message, label[for=\"reset\"]' ).hide();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error( 'Unexpected type selected.' );\n\t\t\t\t}\n\n\t\t\t\tv2Settings.container.show();\n\n\t\t\t\tif ( typeValue === 'invisible' ) {\n\t\t\t\t\tgrecaptcha.execute();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tself.init();\n\t\t};\n\n\t\tv2Settings.init();\n\t};\n\n\t/**\n\t * Handles reCAPTCHA v3 plugin settings validation.\n\t *\n\t * @since 1.0\n\t *\n\t * @return {void}\n\t */\n\tconst recaptchaV3Settings = () => {\n\t\tconst v3Settings = {};\n\n\t\t/**\n\t\t * Initializes the reCAPTCHA v3 settings handler.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tv3Settings.init = () => {\n\t\t\tv3Settings.token = '';\n\t\t\tv3Settings.strings = gforms_recaptcha_recaptcha_strings;\n\n\t\t\tv3Settings.cacheElements();\n\t\t\tv3Settings.validateKeysV3();\n\t\t\tv3Settings.addEventListeners();\n\t\t};\n\n\t\t/**\n\t\t * Cache HTML elements for the v3 reCAPTCHA settings.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tv3Settings.cacheElements = () => {\n\t\t\tv3Settings.fields = {\n\t\t\t\tsiteKey: '#site_key_v3',\n\t\t\t\tsecretKey: '#secret_key_v3',\n\t\t\t\tthreshold: '#score_threshold_v3',\n\t\t\t\tdisableBadge: '#disable_badge_v3',\n\t\t\t\tkeysStatus: '#gform_setting_recaptcha_keys_status_v3',\n\t\t\t};\n\n\t\t\tv3Settings.cache = {\n\t\t\t\tsiteKey: $( v3Settings.fields.siteKey ),\n\t\t\t\tsecretKey: $( v3Settings.fields.secretKey ),\n\t\t\t\tkeysStatus: $( v3Settings.fields.keysStatus ),\n\t\t\t\tsave: $( '#gform-settings-save' ),\n\t\t\t};\n\t\t};\n\n\t\t/**\n\t\t * Setup event listeners for field validation.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tv3Settings.addEventListeners = () => {\n\t\t\tif ( ! v3Settings.strings.site_key.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$( v3Settings.fields.siteKey ).on( 'keyup', () => v3Settings.clearValidationFeedback() );\n\t\t\t$( v3Settings.fields.secretKey ).on( 'keyup', () => v3Settings.clearValidationFeedback() );\n\t\t};\n\n\t\t/**\n\t\t * Empty out the validation feedback if the fields are modified, as we can't yet know the status.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tv3Settings.clearValidationFeedback = () => {\n\t\t\tv3Settings.unsetValid( v3Settings.cache.siteKey.closest( '.gform-settings-input__container' ) );\n\t\t\tv3Settings.unsetValid( v3Settings.cache.secretKey.closest( '.gform-settings-input__container' ) );\n\t\t};\n\n\t\t/**\n\t\t * Handles validation of the v3 site key.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {Promise<unknown>} Returns a promise so this can be verified synchronously if checking the secret key.\n\t\t */\n\t\tv3Settings.getRecaptchaToken = () => {\n\t\t\treturn new Promise( ( resolve, reject ) => {\n\t\t\t\tconst siteKeyContainer = v3Settings.cache.siteKey.closest( '.gform-settings-input__container' );\n\n\t\t\t\ttry {\n\t\t\t\t\tconst { siteKey } = v3Settings.cache;\n\t\t\t\t\tconst siteKeyValue = siteKey.val().trim();\n\n\t\t\t\t\tif ( 0 === siteKeyValue.length ) {\n\t\t\t\t\t\tv3Settings.unsetValid( siteKeyContainer );\n\t\t\t\t\t\tv3Settings.unsetValid( v3Settings.cache.keysStatus.closest( '.gform-settings-input__container' ) );\n\t\t\t\t\t\t$( v3Settings.fields.keysStatus ).find( 'input' ).val( '0' );\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tgrecaptcha.ready( () => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tgrecaptcha.execute( siteKeyValue, { action: 'submit' } ).then( ( token ) => {\n\t\t\t\t\t\t\t\tresolve( token );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\t\treject( error );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\treject( error );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\t/**\n\t\t * Handles validation of the v3 site and secret keys.\n\t\t *\n\t\t * On page load, attempt to generate a reCAPTCHA token and immediately validate it on the server. If it's good,\n\t\t * we'll update the presentation of the keys to indicate success or failure.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tv3Settings.validateKeysV3 = () => {\n\t\t\tconst siteKeyContainer = v3Settings.cache.siteKey.closest( '.gform-settings-input__container' );\n\t\t\tconst secretKeyContainer = v3Settings.cache.secretKey.closest( '.gform-settings-input__container' );\n\t\t\tconst keysStatusInput = $( v3Settings.fields.keysStatus ).find( 'input' );\n\n\t\t\tif ( ! $( v3Settings.fields.siteKey ).val().trim().length ) {\n\t\t\t\tv3Settings.unsetValid( siteKeyContainer );\n\t\t\t\tv3Settings.unsetValid( secretKeyContainer );\n\t\t\t\tkeysStatusInput.val( '0' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tv3Settings.getRecaptchaToken()\n\t\t\t\t.then( ( token ) => {\n\t\t\t\t\tv3Settings.token = token;\n\t\t\t\t} )\n\t\t\t\t.catch( () => {\n\t\t\t\t\tv3Settings.setInvalid( siteKeyContainer );\n\t\t\t\t\tv3Settings.setInvalid( secretKeyContainer );\n\t\t\t\t\tkeysStatusInput.val( '0' );\n\t\t\t\t} )\n\t\t\t\t.finally( () => {\n\t\t\t\t\t$.ajax(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdataType: 'JSON',\n\t\t\t\t\t\t\turl: ajaxurl,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\taction: 'verify_secret_key',\n\t\t\t\t\t\t\t\tnonce: v3Settings.strings.nonce,\n\t\t\t\t\t\t\t\ttoken: v3Settings.token,\n\t\t\t\t\t\t\t\tsite_key_v3: $( v3Settings.fields.siteKey ).val(),\n\t\t\t\t\t\t\t\tsecret_key_v3: $( v3Settings.fields.secretKey ).val(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t).then( ( response ) => {\n\t\t\t\t\t\tswitch ( response.data.keys_status ) {\n\t\t\t\t\t\t\tcase '1':\n\t\t\t\t\t\t\t\tv3Settings.setValid( siteKeyContainer );\n\t\t\t\t\t\t\t\tv3Settings.setValid( secretKeyContainer );\n\t\t\t\t\t\t\t\tkeysStatusInput.val( '1' );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase '0':\n\t\t\t\t\t\t\t\tv3Settings.setInvalid( siteKeyContainer );\n\t\t\t\t\t\t\t\tv3Settings.setInvalid( secretKeyContainer );\n\t\t\t\t\t\t\t\tkeysStatusInput.val( '0' );\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tv3Settings.unsetValid( siteKeyContainer );\n\t\t\t\t\t\t\t\tv3Settings.unsetValid( secretKeyContainer );\n\t\t\t\t\t\t\t\tkeysStatusInput.val( '0' );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t};\n\n\t\t/**\n\t\t * Updates the text field to display no feedback.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @param {Object} el The jQuery element.\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tv3Settings.unsetValid = ( el ) => {\n\t\t\tel.removeClass( 'gform-settings-input__container--feedback-success' );\n\t\t\tel.removeClass( 'gform-settings-input__container--feedback-error' );\n\t\t};\n\n\t\t/**\n\t\t * Updates the text field to display the successful feedback.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @param {Object} el The jQuery element.\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tv3Settings.setValid = ( el ) => {\n\t\t\tel.addClass( 'gform-settings-input__container--feedback-success' );\n\t\t\tel.removeClass( 'gform-settings-input__container--feedback-error' );\n\t\t};\n\n\t\t/**\n\t\t * Updates the text field to display the error feedback.\n\t\t *\n\t\t * @since 1.0\n\t\t *\n\t\t * @param {Object} el The jQuery element.\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tv3Settings.setInvalid = ( el ) => {\n\t\t\tel.removeClass( 'gform-settings-input__container--feedback-success' );\n\t\t\tel.addClass( 'gform-settings-input__container--feedback-error' );\n\t\t};\n\n\t\tv3Settings.init();\n\t};\n\n\t$( document ).ready( () => {\n\n\t\tlet $form   = $( '#gform-settings' );\n\t\tlet $action = $form.find( 'input[name=\"gf_recaptcha_action\"]' );\n\n\t\tif ( 'gf_recaptcha_v3_classic' === $action.val() ) {\n\t\t\trecaptchaV3Settings();\n\t\t} else if ( 'gf_recaptcha_v2' === $action.val() ) {\n\t\t\trecaptchaV2Settings();\n\t\t}\n\n\t\tif ( gforms_recaptcha_recaptcha_strings.disable_badge ) {\n\t\t\tvar badge = document.querySelector('.grecaptcha-badge');\n\t\t\tif ( badge ) {\n\t\t\t\tbadge.style.visibility = 'hidden';\n\t\t\t}\n\t\t}\n\n\n\t\t// Handle disconnects from the admin.\n\t\tlet $disconnect = $( '.gfrecaptcha-disconnect' );\n\t\tif ( $disconnect.length > 0 ) {\n\t\t\t$disconnect.on( 'click', function( e ) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\t// check if we have any saved settings that are going to be deleted\n\t\t\t\tlet $site_key_v3 = $( '#site_key_v3' );\n\t\t\t\tlet $site_key_v2 = $( '#site_key_v2' );\n\t\t\t\tlet hasSavedSettings = false;\n\t\t\t\tif ( $site_key_v3.length > 0 && $site_key_v3.val() !== '' ) {\n\t\t\t\t\thasSavedSettings = true;\n\t\t\t\t}\n\t\t\t\tif ( $site_key_v2.length > 0 && $site_key_v2.val() !== '' ) {\n\t\t\t\t\thasSavedSettings = true;\n\t\t\t\t}\n\n\t\t\t\t// Confirm deleting settings if you change connection type or disconnect\n\t\t\t\tif ( hasSavedSettings || $disconnect.hasClass( 'gfrecaptcha-disconnect' ) ) {\n\t\t\t\t\tif ( $disconnect.hasClass( 'gfrecaptcha-disconnect' ) ) {\n\t\t\t\t\t\tvar title = gforms_recaptcha_recaptcha_strings.disconnect_title;\n\t\t\t\t\t\tvar message = gforms_recaptcha_recaptcha_strings.disconnect_message;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar title = gforms_recaptcha_recaptcha_strings.change_connection_type_title;\n\t\t\t\t\t\tvar message = gforms_recaptcha_recaptcha_strings.change_connection_type_message;\n\t\t\t\t\t}\n\t\t\t\t\tif( typeof gform.instances.dialogConfirmAsync !== 'function' ) {\n\t\t\t\t\t\tif( ! confirm( message ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgform.instances.dialogConfirmAsync( title, message ).then((userConfirmed) => {\n\t\t\t\t\t\t\tif (!userConfirmed) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( $disconnect.hasClass( 'gfrecaptcha-changetype' ) ) {\n\t\t\t\t\t$disconnect.html( gforms_recaptcha_recaptcha_strings.change_connection_type );\n\t\t\t\t} else {\n\t\t\t\t\t$disconnect.html( gforms_recaptcha_recaptcha_strings.disconnect );\n\t\t\t\t}\n\n\t\t\t\tvar url_params = wpAjax.unserialize( e.target.href );\n\t\t\t\tvar nonce_value = url_params.nonce;\n\n\t\t\t\t// Perform Ajax request.\n\t\t\t\t$.post(\n\t\t\t\t\tajaxurl,\n\t\t\t\t\t{\n\t\t\t\t\t\taction: 'disconnect_recaptcha',\n\t\t\t\t\t\tnonce: nonce_value,\n\t\t\t\t\t},\n\t\t\t\t\tfunction( response ) {\n\t\t\t\t\t\twindow.location.href = window.location.href;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\t// Handle form submission on connect screen.\n\t\t$form.on( 'submit', function( e ) {\n\n\t\t\t// Determining if we're just connecting for the first time.\n\t\t\tif ( $form.find( 'input[value=\"recaptcha_setup\"]' ).length === 1 ) {\n\t\t\t\t// is_postback\n\t\t\t\te.preventDefault();\n\n\t\t\t\t// Set l18n.\n\t\t\t\tvar $save_button = $form.find( '#gform-settings-save' );\n\t\t\t\tvar $connection_type = $form.find( '[name=\"_gform_setting_connection_type\"]:checked').val();\n\n\t\t\t\t// Get nonce.\n\t\t\t\tvar nonce_value = $form.find( 'input[name=\"recaptcha_nonce\"]').val();\n\n\t\t\t\tif ( $connection_type === 'enterprise' ) {\n\t\t\t\t\t// Perform Ajax request.\n\t\t\t\t\t$.post(\n\t\t\t\t\t\tajaxurl,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taction: 'perform_enterprise_oauth',\n\t\t\t\t\t\t\tnonce: nonce_value,\n\t\t\t\t\t\t\tmode: $connection_type,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction( response ) {\n\t\t\t\t\t\t\tif ( ! response.data.errors ) {\n\t\t\t\t\t\t\t\twindow.location.href = response.data.redirect;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'json'\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// Perform Ajax request.\n\t\t\t\t\t$.post(\n\t\t\t\t\t\tajaxurl,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taction: 'update_reload_settings',\n\t\t\t\t\t\t\tnonce: nonce_value,\n\t\t\t\t\t\t\tconnection_type: $connection_type,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction( response ) {\n\t\t\t\t\t\t\tif ( ! response.data.errors ) {\n\t\t\t\t\t\t\t\tconst url = new URL( response.data.redirect );\n\t\t\t\t\t\t\t\turl.searchParams.set( 'connection_type', $connection_type );\n\t\t\t\t\t\t\t\twindow.location.href = url;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'json'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( 'gf_recaptcha_enterprise' === $action.val() ) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\t// Getting selected items from the account/property and data stream drop downs.\n\t\t\t\tlet $selected_project  = $form.find( 'select[name=\"recaptcha_project\"]' ).find( ':selected' );\n\t\t\t\tlet $selected_site_key = $form.find( '#recaptcha-site-keys :selected' )\n\n\t\t\t\t$.post(\n\t\t\t\t\tajaxurl,\n\t\t\t\t\t{\n\t\t\t\t\t\taction: 'save_recaptcha_enterprise_data',\n\t\t\t\t\t\tproject_number: $selected_project.val(),\n\t\t\t\t\t\tproject_id: $selected_project.data( 'project-id' ),\n\t\t\t\t\t\tproject_name: $selected_project.data( 'project-name' ),\n\t\t\t\t\t\tsite_key_v3_enterprise: $selected_site_key.val(),\n\t\t\t\t\t\tsite_key_display_name: $selected_site_key.data('site-key-display-name'),\n\t\t\t\t\t\tscore_threshold_v3: $form.find( '#score_threshold_v3' ).val(),\n\t\t\t\t\t\tdisable_badge_v3: $form.find( 'input[name=\"_gform_setting_disable_badge_v3\"]' ).val(),\n\t\t\t\t\t\tnonce: $form.find( 'input[name=\"recaptcha_nonce\"]' ).val(),\n\t\t\t\t\t},\n\t\t\t\t\tfunction( response ) {\n\t\t\t\t\t\tif ( response.success ) {\n\t\t\t\t\t\t\twindow.location.href = response['data'];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\t// Get keys available to the selected project.\n\t\t$( '#recaptcha_project' ).on( 'change', function( e ) {\n\n\t\t\tlet $option = $( this ).find( ':selected' );\n\t\t\tlet nonce = $( 'body' ).find( 'input[name=\"recaptcha_nonce\"]' ).val();\n\n\t\t\t$( '#recaptcha-site-keys' ).html( '<br /><img src=\"' + gforms_recaptcha_recaptcha_strings.spinner + '\" />' );\n\t\t\t$.post(\n\t\t\t\tajaxurl,\n\t\t\t\t{\n\t\t\t\t\taction: 'get_enterprise_site_keys',\n\t\t\t\t\tproject: $option.val(),\n\t\t\t\t\tnonce: nonce,\n\t\t\t\t},\n\t\t\t\tfunction( response ) {\n\t\t\t\t\tif ( response.success ) {\n\t\t\t\t\t\tconst siteKeys = response['data'];\n\n\t\t\t\t\t\tconst select = document.createElement( 'select' );\n\t\t\t\t\t\tselect.name  = 'recaptcha-site-keys';\n\n\t\t\t\t\t\tconst label       = document.createElement( 'label' );\n\t\t\t\t\t\tlabel.textContent = 'Enterprise Site Key';\n\t\t\t\t\t\tlabel.setAttribute( 'for', 'recaptcha-site-keys' );\n\t\t\t\t\t\tlabel.classList.add( 'gform-settings-label' );\n\n\t\t\t\t\t\tconst header = document.createElement( 'div' );\n\t\t\t\t\t\theader.classList.add( 'gform-settings-field__header' );\n\t\t\t\t\t\theader.appendChild( label );\n\n\t\t\t\t\t\tconst defaultOption       = document.createElement( 'option' );\n\t\t\t\t\t\tdefaultOption.value       = '';\n\t\t\t\t\t\tdefaultOption.textContent = 'Select a site key';\n\t\t\t\t\t\tselect.appendChild( defaultOption );\n\n\t\t\t\t\t\tsiteKeys.forEach( key => {\n\t\t\t\t\t\t\tconst option       = document.createElement( 'option' );\n\t\t\t\t\t\t\toption.value       = key.value;\n\t\t\t\t\t\t\toption.textContent = key.displayName;\n\t\t\t\t\t\t\toption.setAttribute( 'data-site-key-display-name', key.displayName );\n\t\t\t\t\t\t\tselect.appendChild( option );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconst container     = document.querySelector( '#recaptcha-site-keys' );\n\t\t\t\t\t\tcontainer.innerHTML = '';\n\t\t\t\t\t\tcontainer.appendChild( header );\n\t\t\t\t\t\tcontainer.appendChild( select );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$( '#recaptcha-site-keys' ).html( '' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t} );\n\n\t\tgform.adminUtils.handleUnsavedChanges( '#gform-settings' );\n\t} );\n} )( jQuery );\n"],"names":["$","recaptchaV2Settings","v2Settings","init","cacheElements","addEventListeners","container","fields","siteKey","secretKey","reset","type","on","window","loadRecaptcha","self","recaptcha","save","flushExistingState","remove","canBeDisplayed","hideRecaptcha","showSelectedRecaptcha","render","typeValue","grecaptcha","sitekey","val","trim","size","badge","errorCallback","callback","prop","___grecaptcha_cfg","clients","count","html","hide","show","Error","execute","recaptchaV3Settings","v3Settings","token","strings","gforms_recaptcha_recaptcha_strings","validateKeysV3","threshold","disableBadge","keysStatus","cache","site_key","length","clearValidationFeedback","unsetValid","closest","getRecaptchaToken","Promise","resolve","reject","siteKeyContainer","siteKeyValue","find","ready","action","then","error","secretKeyContainer","keysStatusInput","catch","setInvalid","finally","ajax","method","dataType","url","ajaxurl","data","nonce","site_key_v3","secret_key_v3","response","keys_status","setValid","el","removeClass","addClass","document","$form","$action","disable_badge","querySelector","style","visibility","$disconnect","e","preventDefault","$site_key_v3","$site_key_v2","hasSavedSettings","hasClass","title","disconnect_title","message","disconnect_message","change_connection_type_title","change_connection_type_message","gform","instances","dialogConfirmAsync","confirm","userConfirmed","change_connection_type","disconnect","url_params","wpAjax","unserialize","target","href","nonce_value","post","location","$save_button","$connection_type","mode","errors","redirect","connection_type","URL","searchParams","set","$selected_project","$selected_site_key","project_number","project_id","project_name","site_key_v3_enterprise","site_key_display_name","score_threshold_v3","disable_badge_v3","success","$option","spinner","project","siteKeys","select","createElement","name","label","textContent","setAttribute","classList","add","header","appendChild","defaultOption","value","forEach","key","option","displayName","innerHTML","adminUtils","handleUnsavedChanges","jQuery"],"sourceRoot":""}