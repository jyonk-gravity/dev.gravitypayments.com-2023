(()=>{"use strict";const e=window.wp.plugins,t=window.wp.element,s=window.qlse.store,n=window.wp.i18n,o=window.wp.components,r=window.wp.data,i=window.wp.editor,c=window.wp.coreData;(0,e.registerPlugin)("search-exclude-sidebar-metabox",{render:()=>{var e,d;const{settings:u,setSettings:l,hasResolvedSettings:a,saveSettings:w}=(0,s.useSettings)(),p=null!==(e=null!==(d=wp.editor?.PluginDocumentSettingPanel)&&void 0!==d?d:wp.editPost?.PluginDocumentSettingPanel)&&void 0!==e?e:wp.editSite?.PluginDocumentSettingPanel,{exclude:g,setExclude:m}=((e={})=>{const{meta:t,setMeta:s}=((e={})=>{const{context:t={}}=e,{meta:s,postType:n,postId:o}=(0,r.useSelect)((e=>{const{getEditedEntityRecord:s}=e(c.store),{getCurrentPostId:n,getCurrentPostType:o}=e(i.store),{postType:r=o(),postId:d=n()}=t,u=s("postType",r,d);return{meta:u?.meta,postType:r,postId:d}}),[t]),{editEntityRecord:d}=(0,r.useDispatch)(c.store);return{meta:s,setMeta:e=>{d("postType",n,o,{meta:{...s,...e}})}}})(e);return{exclude:t?._exclude,setExclude:e=>{s({_exclude:e})}}})(),x=(0,r.select)("core/editor").getCurrentPostId(),P=(0,r.select)("core/editor").getCurrentPostType(),S=(0,t.useRef)(!1),h=u?.entries[P]?.ids;return(0,t.useEffect)((()=>{const e=(0,r.subscribe)((()=>{const e=(0,r.select)("core/editor").isSavingPost(),t=(0,r.select)("core/editor").isAutosavingPost();!e||t||S.current||(S.current=!0,w(u)),e||(S.current=!1)}));return()=>e()}),[u]),(0,t.createElement)(p,{title:"Search Exclude",name:"search-exclude"},(0,t.createElement)(o.CheckboxControl,{__nextHasNoMarginBottom:!0,label:(0,n.__)("Exclude from Search Results","search-exclude"),checked:h?.includes(x),onChange:()=>{const e=h.includes(x)?h.filter((e=>e!==x)):[...h,x];m(!g||void 0),l({entries:{[P]:{ids:e}}})}}))}}),(window.qlse=window.qlse||{}).gutenberg={}})();