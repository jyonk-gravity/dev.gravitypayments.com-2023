(()=>{"use strict";const e=window.wp.plugins,t=window.wp.element,s=window.qlse.store,n=window.wp.i18n,o=window.wp.components,r=window.wp.data,c=window.wp.editor,l=window.wp.coreData;(0,e.registerPlugin)("search-exclude-sidebar-metabox",{render:()=>{var e,i;const{settings:d,setSettings:u,isResolvingSettings:a,saveSettings:p}=(0,s.useSettings)(),w=null!==(e=null!==(i=wp.editor?.PluginDocumentSettingPanel)&&void 0!==i?i:wp.editPost?.PluginDocumentSettingPanel)&&void 0!==e?e:wp.editSite?.PluginDocumentSettingPanel,{exclude:g,setExclude:m}=((e={})=>{const{meta:t,setMeta:s}=((e={})=>{const{context:t={}}=e,{meta:s,postType:n,postId:o}=(0,r.useSelect)((e=>{const{getEditedEntityRecord:s}=e(l.store),{getCurrentPostId:n,getCurrentPostType:o}=e(c.store),{postType:r=o(),postId:i=n()}=t,d=s("postType",r,i);return{meta:d?.meta,postType:r,postId:i}}),[t]),{editEntityRecord:i}=(0,r.useDispatch)(l.store);return{meta:s,setMeta:e=>{i("postType",n,o,{meta:{...s,...e}})}}})(e);return{exclude:t?._exclude,setExclude:e=>{s({_exclude:e})}}})(),x=(0,r.select)("core/editor").getCurrentPostId(),h=(0,r.select)("core/editor").getCurrentPostType(),E=(0,t.useRef)(!1),P=d?.entries[h]?.all,S=d?.entries[h]?.ids,_=S?.includes(x)||P;return(0,t.useEffect)((()=>{const e=(0,r.subscribe)((()=>{const e=(0,r.select)("core/editor").isSavingPost(),t=(0,r.select)("core/editor").isAutosavingPost();!e||t||E.current||(E.current=!0,p(d)),e||(E.current=!1)}));return()=>e()}),[d]),(0,t.createElement)(w,{title:"Search Exclude",name:"search-exclude"},a?(0,t.createElement)("div",{className:"qlse__checkbox--loading"},(0,t.createElement)(o.Spinner,null),(0,t.createElement)("label",null,(0,n.__)("Exclude from Search Results","search-exclude"))):(0,t.createElement)(o.CheckboxControl,{className:P&&"qlse__checkbox--disabled",__nextHasNoMarginBottom:!0,help:P?(0,n.sprintf)((0,n.__)("All %s are excluded.","search-exclude"),h):"",label:(0,n.__)("Exclude from Search Results","search-exclude"),isDisabled:P||a,checked:_,onChange:()=>{const e=S.includes(x)?S.filter((e=>e!==x)):[...S,x];m(!g||void 0),u({entries:{[h]:{ids:e}}})}}))}}),(window.qlse=window.qlse||{}).gutenberg={}})();