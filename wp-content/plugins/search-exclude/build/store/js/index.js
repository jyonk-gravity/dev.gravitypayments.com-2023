(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{FIRST_WP_VERSION_WITH_THUNK_SUPPORT:()=>y,INITIAL_STATE:()=>c,QLSE_REST_ROUTE:()=>h,QUADLAYERS_QLSE_STORE_NAME:()=>N,STORE_NAME:()=>i,WP_VERSION:()=>w,actions:()=>n,applyThunkMiddleware:()=>f,fetchRestApiSettings:()=>_,isVersionLessThan:()=>T,reducer:()=>a,resolvers:()=>r,selectors:()=>s,useSettings:()=>v});var s={};e.r(s),e.d(s,{getSettings:()=>d});var n={};e.r(n),e.d(n,{saveSettings:()=>R,setSettings:()=>E});var r={};e.r(r),e.d(r,{getSettings:()=>b});var a={};e.r(a),e.d(a,{default:()=>m});const o=window.wp.data,i="qlse/settings",c={entries:{post:{all:!1,ids:[]},page:{all:!1,ids:[]},product:{all:!1,ids:[]}},taxonomies:{category:{all:!1,ids:[]},tags:{all:!1,ids:[]},product_cat:{all:!1,ids:[]}},author:{all:!1,ids:[]}},d=e=>e,l=window.wp.i18n,g=window.wp.notices,u=window.wp.apiFetch;var S=e.n(u);const p=window.wp.url,{QLSE_REST_ROUTE:h,WP_VERSION:w}=qlseStore,y="6.0",_=({method:e,data:t}={})=>async function(e){return await S()(e).then((e=>{if(e.code)throw e;return e})).catch((e=>e?.data?.params&&e?.data?.status?{code:e.data.status,message:Object.values(e.data.params)[0]}:{code:e?.code?e.code:"Unknown",message:e?.message?e.message:"Unknown"}))}({path:"GET"===e?(0,p.addQueryArgs)(h,t):h,method:e,data:t});function v(){const{setSettings:e,saveSettings:t}=(0,o.useDispatch)(i),{settings:s,isResolvingSettings:n,hasResolvedSettings:r}=(0,o.useSelect)((e=>{const{getSettings:t,isResolving:s,hasFinishedResolution:n}=e(i);return{settings:t(),isResolvingSettings:s("getSettings"),hasResolvedSettings:n("getSettings")}}),[]);return{settings:s,isResolvingSettings:n,hasResolvedSettings:r,hasSettings:!(!r||!Object.keys(s)?.length),saveSettings:t,setSettings:e}}const T=(e,t)=>{const s=e.split(".").map(Number),n=t.split(".").map(Number);for(let e=0;e<n.length;e++){if(s[e]<n[e])return!0;if(s[e]>n[e])return!1}return!1},f=e=>{const t=e.instantiate;return e.instantiate=e=>{const s=t(e);if(!s.store||!s.store.dispatch)throw new Error((0,l.__)("The created instance does not contain a valid store.","search-exclude"));const n=s.store.dispatch,r=((e,t)=>({registry:t,get dispatch(){return Object.assign((t=>e.store.dispatch(t)),e.getActions())},get select(){return Object.assign((t=>t(e.store.__unstableOriginalGetState())),e.getSelectors())},get resolveSelect(){return e.getResolveSelectors()}}))(s,e);return s.store.dispatch=((e,t)=>s=>"function"==typeof s?s(e):t(s))(r,n),s},e};function O(e,t){const s={};return new Set([...Object.keys(e),...Object.keys(t)]).forEach((n=>{e.hasOwnProperty(n)&&t.hasOwnProperty(n)?!function(e){const t=typeof e;return null!=e&&("object"==t||"function"==t)}(e[n])||Array.isArray(e[n])?s[n]=t[n]:s[n]=O(e[n],t[n]):e.hasOwnProperty(n)?s[n]=e[n]:t.hasOwnProperty(n)&&(s[n]=t[n])})),s}const E=e=>({type:"SET_SETTINGS",payload:t=>O(t,e)}),R=e=>async({registry:t,dispatch:s,select:n})=>{const r=await _({method:"POST",data:e});return r?.code?(t.dispatch(g.store).createSuccessNotice((0,l.sprintf)("%s: %s",r.code,r.message),{type:"snackbar"}),!1):(s.setSettings(e),!0)},b=async()=>{try{const e=await _();return E(e)}catch(e){console.error(e)}};function m(e=c,t){return"SET_SETTINGS"===t.type?t.payload(e):e}const P=(0,o.createReduxStore)(i,{reducer:m,actions:n,selectors:s,resolvers:r});(0,o.register)(T(w,y)?f(P):P);const N=i;(window.qlse=window.qlse||{}).store=t})();