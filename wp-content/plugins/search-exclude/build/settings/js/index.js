(()=>{"use strict";const e=window.wp.element,t=window.qlse.store,s=window.wp.i18n,l=window.wp.data,a=(window.wp.editor,window.wp.coreData),n=()=>{const{settingsExcluded:n,saveExcludedSettings:o,hasResolvedSettingsExcluded:c,isResolvingSettingsExcluded:i}=(0,t.useExcludedSettings)(),{posts:r,isResolvingPosts:d,hasResolvedPosts:p}=((e=[],t=[])=>{const{validPostTypes:s,isResolvingPostTypes:n,hasResolvedPostTypes:o}=(0,l.useSelect)((e=>{const{getPostTypes:t,isResolving:s,hasFinishedResolution:l}=e(a.store),n={per_page:-1},o=t(n),c=s("getPostTypes",[n]),i=l("getPostTypes",[n]);return!c&&i&&o?{validPostTypes:o.filter((e=>e.viewable&&!e.slug.startsWith("wp_"))),isResolvingPostTypes:!1,hasResolvedPostTypes:!0}:{validPostTypes:[],isResolvingPostTypes:!0,hasResolvedPostTypes:!1}}),[]),c=t.length?t:s,{postsData:i,isResolvingPosts:r,hasResolvedPosts:d}=(0,l.useSelect)((t=>{const{getEntityRecords:s,isResolving:l,hasFinishedResolution:i}=t(a.store);if(n||!o||!c.length)return{postsData:[],isResolvingPosts:!0,hasResolvedPosts:!1};let r=[],d=!1,p=!0;return c.forEach((t=>{const a=[];for(let t=0;t<e.length;t+=50)a.push(e.slice(t,t+50));a.forEach((e=>{const a={include:e,per_page:e.length,_fields:["id","title","date","link","type"]},n=s("postType",t.slug,a),o=l("getEntityRecords",["postType",t.slug,a]),c=i("getEntityRecords",["postType",t.slug,a]);d=d||o,p=p&&c,n&&n.length&&(r=r.concat(n.map((({id:e,title:t,date:s,link:l,type:a})=>({id:e,title:t.rendered,date:s,link:l,postType:a})))))}))})),{postsData:r,isResolvingPosts:d,hasResolvedPosts:p}}),[e.join(","),c.map((e=>e.slug)).join(",")]);return{posts:i,isResolvingPosts:r,hasPosts:!r&&i.length>0,hasResolvedPosts:d}})(n),[u,m]=(0,e.useState)([]),g=n.sort().join(" ")!==u.sort().join(" "),h=d||i,E=p&&c;(0,e.useEffect)((()=>{E&&m(n)}),[E,n]);const y=[...new Set(r.map((e=>e.postType)))];return(0,e.createElement)("div",{className:"wrap"},(0,e.createElement)("h2",null,(0,s.__)("Search Exclude","search-exclude")),h?(0,e.createElement)("span",null,(0,s.__)("Loading…","search-exclude")):0===r?.length?(0,e.createElement)("p",null,(0,s.__)("No items excluded from the search results yet.","search-exclude")):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("span",null,(0,s.__)("The following items are excluded from the search results.","search-exclude")),(0,e.createElement)("form",{method:"post",action:"options-general.php?page=search_exclude",encType:"multipart/form-data",onSubmit:e=>(async e=>{e.preventDefault(),await o(u)})(e)},y.map(((t,l)=>(0,e.createElement)("div",{key:l},(0,e.createElement)("h3",null,t[0].toUpperCase()+t.substring(1)),(0,e.createElement)("table",{className:"wp-list-table widefat fixed pages",cellSpacing:"0"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{className:"check-column",scope:"col"}),(0,e.createElement)("th",{className:"column-title manage-column",scope:"col"},(0,e.createElement)("span",null,(0,s.__)("Title","search-exclude"))),(0,e.createElement)("th",{className:"manage-column column-type",scope:"col"},(0,e.createElement)("span",null,(0,s.__)("Date","search-exclude"))))),(0,e.createElement)("tbody",null,r.filter((e=>e.postType===t)).map((t=>(0,e.createElement)("tr",{key:t.id,className:`post-${t.id} page type-${t.type}`},(0,e.createElement)("th",{className:"check-column",scope:"row"},(0,e.createElement)("input",{type:"checkbox",onChange:()=>{return e=t.id,void m((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]));var e},value:t.id,defaultChecked:!0})),(0,e.createElement)("td",{className:"post-title page-title column-title"},(0,e.createElement)("strong",null,(0,e.createElement)("a",{title:`Edit “${t.title}”`,href:`/wp-admin/post.php?post=${t.id}&action=edit`,className:"row-title"},t.title))),(0,e.createElement)("td",{className:"author column-date"},(e=>{const t=new Date(e),s=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");let n=t.getHours();const o=n>=12?"pm":"am";return n=n%12||12,`${s}/${l}/${a} at ${n}:${String(t.getMinutes()).padStart(2,"0")} ${o}`})(t.date)))))))))),(0,e.createElement)("p",{className:"submit"},(0,e.createElement)("input",{type:"submit",className:"button-primary",disabled:!g,value:"Save Changes"})))))};var o;o=()=>{const t=document.querySelector("#search-exclude-settings");(0,e.render)((0,e.createElement)(n,null),t)},/comp|inter|loaded/.test(document.readyState)?o():document.addEventListener("DOMContentLoaded",o,!1),(window.qlse=window.qlse||{}).settings={}})();