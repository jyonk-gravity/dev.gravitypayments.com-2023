/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={500:(e,t)=>{var l;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var l=arguments[t];l&&(e=s(e,r(l)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var l in e)n.call(e,l)&&e[l]&&(t=s(t,l));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(l=function(){return a}.apply(t,[]))||(e.exports=l)}()}},t={};function l(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,l),r.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element,t=window.wp.editor,n=window.wp.i18n,a=window.wp.hooks,{QLSE_PLUGIN_NAME:r,QLSE_DISPLAY_POST_TYPES:s,QLSE_DISPLAY_TAXONOMIES:o}=qlseSettings,{QLSE_PLUGIN_URL:i}=qlseSettings,c=()=>(0,e.createElement)("div",{className:"wrap about-wrap full-width-layout"},(0,e.createElement)("h1",null,r),(0,e.createElement)("p",{className:"about-text"},(0,n.sprintf)((0,n.__)("Thanks for using %s! We will do our best to offer you the best and improved communication experience with your users.","search-exclude!"),r)),(0,e.createElement)("p",{className:"about-text"},(0,e.createElement)("a",{href:"https://quadlayers.com/",target:"__blank"},(0,n.__)("Quadlayers","search-exclude")),"|",(0,e.createElement)("a",{href:"https://quadlayers.com/documentation/search-exclude/?utm_source=qlse_plugin&utm_medium=admin_header&utm_campaign=documentation&utm_content=documentation_link",target:"__blank"},(0,n.__)("Documentation","search-exclude"))),(0,e.createElement)("a",{href:"https://quadlayers.com/?utm_source=qlse_plugin&utm_medium=admin_header&utm_campaign=branding&utm_content=header_logo",target:"_blank",rel:"noreferrer"},(0,e.createElement)("div",{style:{backgroundImage:`url(${i+"/assets/backend/img/quadlayers.jpg"})`},className:"wp-badge qlse_quadlayers__logo"},"QuadLayers")));var u=l(500),m=l.n(u);const d=window.wp.components,p=()=>(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 256 256"},(0,e.createElement)("path",{fill:"currentColor",d:"M128 24a104 104 0 1 0 104 104A104.11 104.11 0 0 0 128 24Zm0 168a12 12 0 1 1 12-12a12 12 0 0 1-12 12Zm8-48.72v.72a8 8 0 0 1-16 0v-8a8 8 0 0 1 8-8c13.23 0 24-9 24-20s-10.77-20-24-20s-24 9-24 20v4a8 8 0 0 1-16 0v-4c0-19.85 17.94-36 40-36s40 16.15 40 36c0 17.38-13.76 31.93-32 35.28Z"})),h=({shift:t=!0,offset:l=5,initialOpen:n=!1,preventClose:a=!1,disabled:r,text:s="",displayDefaultPopoverContainer:o=!0,hideIcon:i=!1,children:c,className:u,placement:h="right",noArrow:g=!1})=>{const[v,y]=(0,e.useState)(n),E=()=>{a||y(!1)};return 0===c?.props?.children?.length?null:(0,e.createElement)("div",{className:m()("qlse__components__tooltip",u,r&&"qlse__components__tooltip--disabled")},(0,e.createElement)("div",{className:"qlse__components__tooltip__button",onMouseEnter:()=>{r||y(!0)}},!!s&&(0,e.createElement)("span",{className:"qlse__components__tooltip__button__text"},s),!i&&(0,e.createElement)(p,null)),v&&(0,e.createElement)(d.Popover,{shift:t,offset:l,noArrow:g,placement:h||void 0,focusOnMount:"false",className:m()("qlse__components__tooltip__popover",u&&u+"__popover"),onClose:E,onMouseLeave:E},o?(0,e.createElement)("div",null,c):c))},g=function(){const{currentTab:t,setCurrentTab:l,tabs:a}=M();return(0,e.createElement)("div",{className:"wrap about-wrap full-width-layout"},(0,e.createElement)("ul",{className:"nav-tab-wrapper"},a.map(({label:a,name:r})=>(0,e.createElement)("li",{key:r,className:"qlse__nav-tab-li",onClick:e=>{e.preventDefault(),e.stopPropagation(),l(r)}},(0,e.createElement)("a",{href:"#",className:m()("nav-tab",t===r&&"nav-tab-active"),onClick:e=>{e.preventDefault()}},a,(0,e.createElement)(h,null,(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h4",null,(0,n.__)("Exclude options:","search-exclude")),(0,e.createElement)("p",null,(0,n.__)('Customize the exclusion settings by post type, taxonomy, or author. Use the selector to search and choose specific IDs to exclude, or opt for the "All" option to exclude every item.',"search-exclude")))))))))},v=window.wp.compose,y=(0,e.createContext)({Slot:{Header:({children:e})=>e||null,Footer:({children:e})=>e||null,Content:({children:e})=>e||null,Aside:({children:e})=>e||null,Navigation:({children:e})=>e||null},Fill:{Header:({children:e})=>e||null,Footer:({children:e})=>e||null,Content:({children:e})=>e||null,Aside:({children:e})=>e||null,Navigation:({children:e})=>e||null}}),E=t=>{const l=(0,e.useRef)(),{children:n}=t,a=`search-exclude.admin.Control.Slot.${(0,v.useInstanceId)(E)}`,r={},s={},{Fill:o,Slot:i}=(0,e.useCallback)((0,d.createSlotFill)(`${a}.header`),[a]),{Fill:c,Slot:u}=(0,e.useCallback)((0,d.createSlotFill)(`${a}.navigation`),[a]),{Fill:m,Slot:p}=(0,e.useCallback)((0,d.createSlotFill)(`${a}content`),[a]),{Fill:h,Slot:g}=(0,e.useCallback)((0,d.createSlotFill)(`${a}.aside`),[a]),{Fill:f,Slot:b}=(0,e.useCallback)((0,d.createSlotFill)(`${a}.footer`),[a]);return r.Header=i,s.Header=o,r.Navigation=u,s.Navigation=c,r.Content=p,s.Content=m,r.Aside=g,s.Aside=h,r.Footer=b,s.Footer=f,(0,e.createElement)(d.SlotFillProvider,null,(0,e.createElement)(y.Provider,{value:{Slot:r,Fill:s,containerRef:l}},n))},f=y.Consumer,b=window.qlse.store,_=window.wp.data,x=window.wp.coreData,T=({postType:e="page",limit:t=100,page:l=1,searchTerm:n,include:a,exclude:r}={})=>(0,_.useSelect)(s=>{if(!(n||a&&0!==a.length))return{postTypes:[],isResolvingPostTypes:!1,hasPostTypes:!1};const{getEntityRecords:o,isResolving:i}=s(x.store),c={per_page:t,page:l,_fields:"id,title.rendered"};if(void 0!==n){if("string"!=typeof n||!n)return{postTypes:[],isResolvingPostTypes:!1,hasPostTypes:!1};c.search=n}if(void 0!==a){if(!Array.isArray(a)||!a?.length)return{postTypes:[],isResolvingPostTypes:!1,hasPostTypes:!1};c.include=a.join(",")}void 0!==r&&Array.isArray(r)&&r?.length&&(c.exclude=r.join(","));const u=["postType",e,c],m=o(...u),d=i("getEntityRecords",u);return{postTypes:m,isResolvingPostTypes:d,hasPostTypes:!d&&!!m?.length}},[e,t,n,a,r]),w=(0,e.memo)(({options:t=[],value:l,isLoading:n,onChange:a,label:r="",multiple:s=!0,onInputChange:o,placeholder:i,disabled:c})=>{const u=l?.map(e=>isNaN(e)?e:parseInt(e)),p=t.filter(e=>!u?.includes(e.value)).map(e=>e.label),h=t.map(e=>u?.includes(e.value)?e.label||e.value:null).filter(e=>!!e);return(0,e.createElement)("div",{className:m()("qlse__multiple-selector",c&&"qlse__multiple-selector--input-disabled")},(0,e.createElement)(d.FormTokenField,{value:h,onChange:e=>{const l=t.map(t=>{if(e.includes(t.label))return t.value}).filter(e=>!!e);a(l)},suggestions:p,label:r,__experimentalShowHowTo:!1,multiple:s,placeholder:i,onInputChange:o}),n&&(0,e.createElement)("div",{className:"qlse__multiple-selector--loading"},(0,e.createElement)(d.Spinner,null)))}),S=(0,e.memo)(({postType:t,settings:l,onChangeSettings:n,disabled:a})=>{const r=l.entries[t]?.ids,s=(0,e.useMemo)(()=>r?.map(e=>parseInt(e)),[t,l.entries]),{postTypes:o,isResolvingPostTypes:i,hasPostTypes:c}=T({postType:t,include:s}),u=(0,e.useRef)(null),[m,d]=(0,e.useState)(""),[p,h]=(0,e.useState)(m),{postTypes:g,isResolvingPostTypes:y,hasPostTypes:E}=T({postType:t,exclude:s,searchTerm:p}),f=(0,v.useDebounce)(e=>{h(e)},300);(0,e.useEffect)(()=>{o&&(u.current=o)},[o]),(0,e.useEffect)(()=>{f(m)},[m,f]);const b=(0,e.useMemo)(()=>[...o||u.current||[]||[],...g||[]].map(e=>({label:e.title?.rendered,value:parseInt(e.id)})),[o,g]);return(0,e.createElement)(w,{options:b,value:r,onChange:e=>{n({entries:{[t]:{ids:e}}})},onInputChange:d,disabled:a,isLoading:i})});function C(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const l=Object.keys(e).sort(),n=Object.keys(t).sort();if(l.length!==n.length)return!1;for(let e=0;e<l.length;e++)if(l[e]!==n[e])return!1;for(const n of l){const l=e[n],a=t[n];if("object"==typeof l&&null!==l&&"object"==typeof a&&null!==a){if(!C(l,a))return!1}else if(l!==a)return!1}return!0}const A=(0,e.memo)(t=>{const[l,a]=(0,e.useState)(!1),{children:r,className:s,onSubmit:o,settings:i}=t,c=(0,v.usePrevious)(i),u=(0,e.useMemo)(()=>!!c&&!C(i,c),[i,c]);return(0,e.createElement)("div",{className:"wrap about-wrap full-width-layout qlwrap"},(0,e.createElement)("form",{onSubmit:async e=>{e.preventDefault(),a(!0),await o(),a(!1)}},r,(0,e.createElement)("p",{className:"submit"},(0,e.createElement)("button",{type:"submit",className:"button button-primary",disabled:!u},(0,n.__)("Save","search-exclude")),(0,e.createElement)("span",{className:"settings-save-status"},l&&(0,e.createElement)(d.Spinner,null)))))}),N=({taxonomy:e,limit:t=50,searchTerm:l,include:n,exclude:a}={})=>(0,_.useSelect)(r=>{const{getEntityRecords:s,isResolving:o}=r(x.store),i={per_page:t};if(void 0!==l){if("string"!=typeof l||!l)return{taxonomyTerms:[],isResolvingTaxonomyTerms:!1,hasTaxonomyTerms:!1};i.search=l}if(void 0!==n){if(!Array.isArray(n)||!n?.length)return{taxonomyTerms:[],isResolvingTaxonomyTerms:!1,hasTaxonomyTerms:!1};i.include=n.join(",")}void 0!==a&&Array.isArray(a)&&a?.length&&(i.exclude=a.join(","));const c=["taxonomy",e,i],u=s(...c),m=o("getEntityRecords",c);return{taxonomyTerms:u,isResolvingTaxonomyTerms:m,hasTaxonomyTerms:!m&&!!u?.length}},[e,t,l,n,a]),R=(0,e.memo)(({taxonomy:t,settings:l,onChangeSettings:n,disabled:a})=>{const r=l.taxonomies[t]?.ids,s=(0,e.useMemo)(()=>r?.map(e=>parseInt(e)),[t,l.taxonomies]),{taxonomyTerms:o,isResolvingTaxonomyTerms:i,hasTaxonomyTerms:c}=N({taxonomy:t,include:s}),u=(0,e.useRef)(null),[m,d]=(0,e.useState)(""),[p,h]=(0,e.useState)(m),{taxonomyTerms:g,isResolvingTaxonomyTerms:y,hasTaxonomyTerms:E}=N({taxonomy:t,exclude:s,searchTerm:p}),f=(0,v.useDebounce)(e=>{h(e)},300);(0,e.useEffect)(()=>{o&&(u.current=o)},[o]),(0,e.useEffect)(()=>{f(m)},[m,f]);const b=(0,e.useMemo)(()=>[...o||u.current||[]||[],...g||[]].map(e=>({label:e.name,value:parseInt(e.id)})),[o,g]);return(0,e.createElement)(w,{options:b,value:r,onChange:e=>{n({taxonomies:{[t]:{ids:e}}})},onInputChange:d,disabled:a})}),P=({limit:e=50,searchTerm:t,include:l,exclude:n}={})=>(0,_.useSelect)(a=>{const{getEntityRecords:r,isResolving:s}=a(x.store),o={per_page:e};if(void 0!==t){if("string"!=typeof t||!t)return{authors:[],isResolvingAuthors:!1,hasAuthors:!1};o.search=t}if(void 0!==l){if(!Array.isArray(l)||!l?.length)return{authors:[],isResolvingAuthors:!1,hasAuthors:!1};o.include=l.join(",")}void 0!==n&&Array.isArray(n)&&n?.length&&(o.exclude=n.join(","));const i=["root","user",o],c=r(...i),u=s("getEntityRecords",i);return{authors:c,isResolvingAuthors:u,hasAuthors:!u&&!!c?.length}},[e,t,l,n]),k=(0,e.memo)(({settings:t,onChangeSettings:l,disabled:n})=>{const a=t.author?.ids,r=(0,e.useMemo)(()=>a?.map(e=>parseInt(e)),[t.author]),{authors:s,isResolvingAuthors:o,hasAuthors:i}=P({include:r}),c=(0,e.useRef)(null),[u,m]=(0,e.useState)(""),[d,p]=(0,e.useState)(u),{authors:h,isResolvingAuthors:g,hasAuthors:y}=P({exclude:r,searchTerm:d}),E=(0,v.useDebounce)(e=>{p(e)},300);(0,e.useEffect)(()=>{s&&(c.current=s)},[s]),(0,e.useEffect)(()=>{E(u)},[u,E]);const f=(0,e.useMemo)(()=>[...s||c.current||[]||[],...h||[]].map(e=>({label:e.name,value:parseInt(e.id)})),[s,h]);return(0,e.createElement)(w,{options:f,value:a,onChange:e=>{l({author:{ids:e}})},onInputChange:m,disabled:n})}),q=()=>{const{setSettings:t,settings:l,saveSettings:a,isResolvingSettings:r}=(0,b.useSettings)(),i=[{value:!1,label:(0,n.__)("Ids","search-exclude")},{value:!0,label:(0,n.__)("All","search-exclude")}];return(0,e.createElement)(A,{settings:l,onSubmit:async()=>await a(l)},(0,e.createElement)("table",{className:"form-table"},(0,e.createElement)("tbody",null,Object.values(s).map((a,r)=>(0,e.createElement)("tr",{key:a,className:"qlse-premium-field"},(0,e.createElement)("th",{scope:"row"},a.label),(0,e.createElement)("td",null,(0,e.createElement)("div",{style:{display:"flex",alignItems:"flex-start"}},(0,e.createElement)("select",{style:{width:"80px"},name:a.name?.all,value:l.entries[a.name]?.all,onChange:e=>{t({entries:{[a.name]:{all:"true"===e.target.value}}})}},i.map(t=>(0,e.createElement)("option",{key:t.value,value:t.value},t.label))),(0,e.createElement)("div",null,(0,e.createElement)(S,{key:a.name,label:a.label,postType:a.name,settings:l,onChangeSettings:t,disabled:l.entries[a.name]?.all}),l.entries[a.name]?.all&&(0,e.createElement)("p",{className:"description"},(0,n.sprintf)((0,n.__)("All %s are excluded.","ai-copilot"),a.label.toLowerCase()))))))),Object.values(o).map((a,r)=>(0,e.createElement)("tr",{key:a,className:"qlse-premium-field"},(0,e.createElement)("th",{scope:"row"},a.label),(0,e.createElement)("td",null,(0,e.createElement)("div",{style:{display:"flex",alignItems:"flex-start"}},(0,e.createElement)("select",{style:{width:"80px"},name:a.name?.all,value:l.taxonomies[a.name]?.all,onChange:e=>{t({taxonomies:{[a.name]:{all:"true"===e.target.value}}})}},i.map(t=>(0,e.createElement)("option",{key:t.value,value:t.value},t.label))),(0,e.createElement)("div",null,(0,e.createElement)(R,{key:a.name,label:a.label,taxonomy:a.name,settings:l,onChangeSettings:t,disabled:l.taxonomies[a.name]?.all}),l.taxonomies[a.name]?.all&&(0,e.createElement)("p",{className:"description"},(0,n.sprintf)((0,n.__)("All %s are excluded.","ai-copilot"),a.label.toLowerCase()))))))),(0,e.createElement)("tr",{className:"qlse-premium-field"},(0,e.createElement)("th",{scope:"row"},(0,n.__)("Authors","search-exclude")),(0,e.createElement)("td",null,(0,e.createElement)("div",{style:{display:"flex",alignItems:"flex-start"}},(0,e.createElement)("select",{style:{width:"80px"},name:l.author?.all,value:l.author?.all,onChange:e=>{t({author:{all:"true"===e.target.value}})}},i.map(t=>(0,e.createElement)("option",{key:t.value,value:t.value},t.label))),(0,e.createElement)("div",null,(0,e.createElement)(k,{settings:l,onChangeSettings:t,disabled:l.author?.all}),l.author?.all&&(0,e.createElement)("p",{className:"description"},(0,n.__)("All authors are excluded.","ai-copilot")))))))))},F=()=>{const{Fill:t}=(0,e.useContext)(y);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.Header,null,(0,e.createElement)(c,null)),(0,e.createElement)(t.Navigation,null,(0,e.createElement)(g,null)),(0,e.createElement)(t.Content,null,(0,e.createElement)(q,null)))},{tabParam:I,setBrowserTabParam:j}=(()=>{const e=document.location.href,t=new URLSearchParams(e),l=new URL(window.location);return{tabParam:t.get("tab"),setBrowserTabParam:e=>{l.searchParams.set("tab",e),window.history.pushState(null,"",l.toString()),window.dispatchEvent(new Event("popstate"))}}})(),L=(0,e.createContext)({}),M=()=>(0,e.useContext)(L),O=(e,t)=>"SET_CURRENT_TAB"===t.type?{...e,...t.payload,prevTab:e.currentTab}:e,D=({children:t})=>{const l=(0,a.applyFilters)("search-exclude.app.tabs",[{label:(0,n.__)("Visibility","search-exclude"),name:"display",content:F}]),[r,s]=(0,e.useReducer)(O,(({defaultTab:e})=>({currentTab:I||e,currentTabSection:"",prevTab:null,prevSubTab:null,user:!1}))({defaultTab:l[0].name}));return(0,e.createElement)(L.Provider,{value:{...r,setCurrentTab:e=>{r.currentTab!=e&&(j(e),s({type:"SET_CURRENT_TAB",payload:{currentTab:e}}))},tabs:l}},t)},U=(L.Consumer,()=>{const{currentTab:t,tabs:l}=M(),n=l.find(({name:e})=>e==t);if(!n)return(0,e.createElement)(e.Fragment,null,t);const a=n.content;return(0,e.createElement)(a,null)}),H=({children:t})=>(0,e.createElement)(E,null,(0,e.createElement)(f,null,({Slot:l,containerRef:n})=>(0,e.createElement)("div",{ref:n},(0,e.createElement)("header",null,(0,e.createElement)(l.Header,null)),(0,e.createElement)("div",null,(0,e.createElement)("nav",null,(0,e.createElement)(l.Navigation,null)),(0,e.createElement)("div",null,(0,e.createElement)("div",null,(0,e.createElement)(l.Content,null)),(0,e.createElement)("aside",null,(0,e.createElement)(l.Aside,null))),(0,e.createElement)("footer",null,(0,e.createElement)(l.Footer,null))),t))),$=()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(D,null,(0,e.createElement)(H,null,(0,e.createElement)(U,null))),t.EditorSnackbars?(0,e.createElement)(t.EditorSnackbars,null):(0,e.createElement)(t.EditorNotices,null));var Q;Q=()=>{const t=document.querySelector("#search-exclude-settings");(0,e.render)((0,e.createElement)($,null),t)},/comp|inter|loaded/.test(document.readyState)?Q():document.addEventListener("DOMContentLoaded",Q,!1)})(),(window.qlse=window.qlse||{}).settings={}})();